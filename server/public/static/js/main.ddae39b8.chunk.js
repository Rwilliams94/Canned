(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{117:function(e,t,a){},118:function(e,t,a){},119:function(e,t,a){},120:function(e,t,a){},121:function(e,t,a){},122:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),r=a(25),i=a.n(r),c=(a(63),a(2)),l=a(3),o=a(5),h=a(4),d=a(8),u=s.a.createContext(),m=a(6),b=a(30),j=a(0),p=function(e){return function(t){return Object(j.jsx)(u.Consumer,{children:function(a){return Object(j.jsx)(e,Object(b.a)(Object(b.a)({},t),{},{context:a}))}})}},f=(a(65),p((function(e){var t=e.context;return Object(j.jsxs)("nav",{className:"navbar",children:[t.isLoggedIn&&Object(j.jsxs)("ul",{className:"nav__list",children:[Object(j.jsx)("li",{children:Object(j.jsx)(m.c,{exact:!0,to:"/beer",className:"nav__link",children:Object(j.jsx)("div",{children:"Beers"})})}),Object(j.jsx)("li",{children:Object(j.jsx)(m.c,{exact:!0,to:"/map",className:"nav__link middle",children:Object(j.jsx)("div",{children:"Map"})})}),Object(j.jsx)("li",{children:Object(j.jsx)(m.c,{exact:!0,to:"/profile",className:"nav__link",children:Object(j.jsx)("div",{children:"Profile"})})})]}),!t.isLoggedIn&&Object(j.jsxs)("ul",{className:"nav__list",children:[Object(j.jsx)("li",{children:Object(j.jsx)(m.c,{exact:!0,to:"/signin",className:"nav__link-half left",children:Object(j.jsx)("div",{children:"Sign In"})})}),Object(j.jsx)("li",{children:Object(j.jsx)(m.c,{exact:!0,to:"/signup",className:"nav__link-half",children:Object(j.jsx)("div",{children:"Sign Up"})})})]})]})}))),g=a(9),O=a(17),x=a.n(O),v=x.a.create({baseURL:"https://canned-project.herokuapp.com",withCredentials:!0});function w(e){if(e.response.data)throw console.log(e.response&&e.response.data),e;throw e}var y={service:v,signup:function(e){return v.post("/api/auth/signup",e).then((function(e){return e.data})).catch(w)},signin:function(e){return v.post("/api/auth/signin",e).then((function(e){return e.data})).catch(w)},isLoggedIn:function(){return v.get("/api/auth/isLoggedIn").then((function(e){return e.data})).catch(w)},logout:function(){return v.get("/api/auth/logout").then((function(e){return e.data})).catch(w)},searchBeers:function(e){return v.get("/api/beer/find/?name=".concat(e)).then((function(e){return e.data})).catch(w)},searchBreweries:function(e){return v.get("/api/brewery/find/?name=".concat(e)).then((function(e){return e.data})).catch(w)},getUser:function(){return v.get("/api/users/me").then((function(e){return e.data})).catch(w)},editUser:function(e){return v.patch("/api/users/edit/me",e).then((function(e){return e.data})).catch(w)},getUserReviews:function(){return v.get("/api/users/me/reviews").then((function(e){return e.data})).catch(w)},getUserImages:function(){return v.get("/api/users/me/images").then((function(e){return e.data})).catch(w)},getUserBeers:function(){return v.get("/api/users/me/beers").then((function(e){return e.data})).catch(w)},addUserBeer:function(e){return v.patch("/api/users/me/beer/add/".concat(e)).then((function(e){return e.data})).catch(w)},removeUserBeer:function(e){return v.patch("/api/users/me/beer/remove/".concat(e)).then((function(e){return e.data})).catch(w)},deleteUser:function(){return v.delete("/api/users/me/delete").then((function(e){return e.data})).catch(w)},getBeers:function(){return v.get("/api/beer").then((function(e){return e.data})).catch(w)},getOneBeer:function(e){return v.get("/api/beer/".concat(e)).then((function(e){return e.data})).catch(w)},CreateBeer:function(e){return v.post("/api/beer/add-beer",e).then((function(e){return e.data})).catch(w)},editBeer:function(e,t){return v.patch("/api/beer/edit-beer/".concat(e),t).then((function(e){return e.data})).catch(w)},getBeerReviews:function(e){return v.get("/api/beer/reviews/".concat(e)).then((function(e){return e.data})).catch(w)},getBeerImages:function(e){return v.get("/api/beer/images/".concat(e)).then((function(e){return e.data})).catch(w)},deleteBeer:function(e){return v.delete("/api/beer/delete/".concat(e)).then((function(e){return e.data})).catch(w)},getBreweries:function(){return v.get("/api/brewery").then((function(e){return e.data})).catch(w)},getOneBrewery:function(e){return v.get("/api/brewery/".concat(e)).then((function(e){return e.data})).catch(w)},CreateBrewery:function(e){return v.post("/api/brewery/add-brewery",e).then((function(e){return e.data})).catch(w)},editBrewery:function(e,t){return v.patch("/api/brewery/edit/".concat(e),t).then((function(e){return e.data})).catch(w)},getBreweryReviews:function(e){return v.get("/api/brewery/reviews/".concat(e)).then((function(e){return e.data})).catch(w)},getBreweryImages:function(e){return v.get("/api/brewery/images/".concat(e)).then((function(e){return e.data})).catch(w)},getBreweryBeers:function(e){return v.get("/api/brewery/beers/".concat(e)).then((function(e){return e.data})).catch(w)},deleteBrewery:function(e){return v.delete("/api/brewery/delete/".concat(e)).then((function(e){return e.data})).catch(w)},getReviews:function(){return v.get("/api/review").then((function(e){return e.data})).catch(w)},getOneReview:function(e){return v.get("/api/review/".concat(e)).then((function(e){return e.data})).catch(w)},CreateReview:function(e){return v.post("/api/review/",e).then((function(e){return e.data})).catch(w)},editReview:function(e,t){return v.patch("/api/review/edit/".concat(e),t).then((function(e){return e.data})).catch(w)},deleteReview:function(e){return v.delete("/api/review/delete/".concat(e)).then((function(e){return e.data})).catch(w)},getImages:function(){return v.get("/api/image").then((function(e){return e.data})).catch(w)},getOneimage:function(e){return v.get("/api/image/".concat(e)).then((function(e){return e.data})).catch(w)},Createimage:function(e){return v.post("/api/image/",e).then((function(e){return e.data})).catch(w)},deleteimage:function(e){return v.delete("/api/image/delete/".concat(e)).then((function(e){return e.data})).catch(w)}},_=(a(89),function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={email:"",password:""},e.handleChange=function(t){var a=t.target.value,n=t.target.name;e.setState(Object(g.a)({},n,a))},e.handleSubmit=function(t){t.preventDefault(),y.signin(e.state).then((function(t){e.context.setUser(t)})).catch((function(e){console.log(e)}))},e}return Object(l.a)(a,[{key:"render",value:function(){return this.context.isLoggedIn?(console.log("already signed in"),Object(j.jsx)(d.a,{to:"/"})):Object(j.jsxs)("section",{className:"auth__form-section",children:[Object(j.jsx)("header",{className:"flex-center auth__header",children:Object(j.jsx)("h1",{children:"Welcome back Can Fan"})}),Object(j.jsxs)("form",{autoComplete:"off",className:" flex-center auth__form",onSubmit:this.handleSubmit,children:[Object(j.jsx)("div",{className:"auth__form-group",children:Object(j.jsx)("input",{onChange:this.handleChange,value:this.state.email,className:"auth__input",id:"email",type:"email",name:"email",placeholder:"Email Address"})}),Object(j.jsx)("div",{className:"auth__form-group",children:Object(j.jsx)("input",{onChange:this.handleChange,value:this.state.password,className:"auth__input",id:"password",type:"password",name:"password",placeholder:"Password"})}),Object(j.jsx)("button",{className:"auth__btn",children:Object(j.jsx)("h2",{children:"Sign in"})})]})]})}}]),a}(n.Component));_.contextType=u;var S=_,N=function(e){return Object(j.jsx)(S,{})},C=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={},e.handleChange=function(t){var a=t.target.value,n=t.target.name;e.setState(Object(g.a)({},n,a))},e.handleSubmit=function(t){t.preventDefault(),y.signup(e.state).then((function(t){e.context.setUser(t)})).catch((function(e){console.log(e)}))},e}return Object(l.a)(a,[{key:"render",value:function(){return this.context.isLoggedIn?Object(j.jsx)(d.a,{to:"/"}):Object(j.jsxs)("section",{className:"auth__form-section",children:[Object(j.jsx)("header",{className:"flex-center auth__header",children:Object(j.jsx)("h1",{children:"Welcome to Canned!"})}),Object(j.jsxs)("form",{autoComplete:"off",className:"flex-center auth__form",onChange:this.handleChange,onSubmit:this.handleSubmit,children:[Object(j.jsx)("div",{className:"auth__form-group",children:Object(j.jsx)("input",{className:"auth__input",id:"userName",type:"text",name:"userName",placeholder:"User Name"})}),Object(j.jsx)("div",{className:"auth__form-group",children:Object(j.jsx)("input",{className:"auth__input",id:"email",type:"email",name:"email",placeholder:"Email Address"})}),Object(j.jsx)("div",{className:"auth__form-group",children:Object(j.jsx)("input",{className:"auth__input",id:"password",type:"password",name:"password",placeholder:"Password"})}),Object(j.jsx)("div",{className:"auth__form-group",children:Object(j.jsx)("input",{className:"auth__input",id:"city",type:"text",name:"city",placeholder:"Home City"})}),Object(j.jsx)("button",{className:"auth__btn",children:Object(j.jsx)("h2",{children:"Sign up"})})]})]})}}]),a}(n.Component);C.contextType=u;var k=C,B=function(e){return Object(j.jsx)(k,{})},R=a(22),F=(a(45),function(e){var t=Math.round(e.rating),a=t<1?"empty":"",n=t<2?"empty":"",s=t<3?"empty":"",r=t<4?"empty":"",i=t<5?"empty":"";return Object(j.jsxs)("div",{className:"star__box",children:[Object(j.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"}),Object(j.jsx)("span",{className:"fa fa-star ".concat(a)}),Object(j.jsx)("span",{className:"fa fa-star ".concat(n)}),Object(j.jsx)("span",{className:"fa fa-star ".concat(s)}),Object(j.jsx)("span",{className:"fa fa-star ".concat(r)}),Object(j.jsx)("span",{className:"fa fa-star ".concat(i)})]})}),L=function(e){var t=e.beerList;return console.log(e),Object(j.jsx)("div",{children:Object(j.jsx)("ul",{className:"beer__list",children:t.map((function(e){return Object(j.jsx)("li",{className:"beer__list-item",children:Object(j.jsxs)("div",{className:"beer__box",children:[Object(j.jsx)("div",{className:"beer__image-box",children:Object(j.jsx)("img",{className:"beer__image",src:e.image,alt:e.name})}),Object(j.jsxs)("div",{className:"beer__info",children:[Object(j.jsx)(m.b,{exact:!0,to:"/beer-detail/".concat(e._id),children:Object(j.jsx)("h3",{children:e.name})}),Object(j.jsx)("h4",{children:e.breweryname}),Object(j.jsx)(F,{rating:e.rating})]})]})},e._id)}))})})},I=(a(90),p(function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={beers:null,sendBeer:[],popUp:!1,rankedBeer:null,normList:!0},e.handleListNormal=function(){e.setState({normList:!0})},e.handleListRanked=function(){e.setState({normList:!1})},e.handleLogout=function(){var t=e.props.context;y.logout().then((function(){t.removeUser(),e.props.history.push("/")})).catch((function(e){console.log(e)}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;y.getBeers().then((function(t){var a=Object(R.a)(t);a.sort((function(e,t){return t.releasedate-e.releasedate})),e.setState({beers:a});t.sort((function(e,t){return t.rating-e.rating}));e.setState({rankedBeer:t})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){if(null===this.state.beers)return Object(j.jsx)("div",{children:"One sec, just heading to the bar..."});var e=this.state.normList?this.state.beers:this.state.rankedBeer;return Object(j.jsxs)("div",{className:"beer__main-list",children:[Object(j.jsxs)("div",{className:"beer__list-type",children:[Object(j.jsx)("div",{onClick:this.handleListNormal,className:"beer__list-switch",children:Object(j.jsx)("h2",{children:"Latest"})}),Object(j.jsx)("div",{onClick:this.handleListRanked,className:"beer__list-switch",children:Object(j.jsx)("h2",{children:"Top rated"})})]}),Object(j.jsx)(L,{beerList:e})]})}}]),a}(n.Component))),D=function(){return Object(j.jsx)("div",{children:Object(j.jsx)("div",{className:"lost",children:Object(j.jsx)("p",{children:"you seem a bit lost, let's get back to the beer!"})})})},U=a(11),A=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={rating:0,starOne:"empty",starTwo:"empty",starThree:"empty",starFour:"empty",starFive:"empty"},e.handleOne=function(){e.setState({rating:1,starOne:"",starTwo:"empty",starThree:"empty",starFour:"empty",starFive:"empty"}),e.props.setRate(e.state.rating),console.log(e.state)},e.handleTwo=function(){e.setState({rating:2,starOne:"",starTwo:"",starThree:"empty",starFour:"empty",starFive:"empty"}),e.props.setRate(e.state.rating),console.log(e.state)},e.handleThree=function(){e.setState({rating:3,starOne:"",starTwo:"",starThree:"",starFour:"empty",starFive:"empty"}),e.props.setRate(e.state.rating),console.log(e.state)},e.handleFour=function(){e.setState({rating:4,starOne:"",starTwo:"",starThree:"",starFour:"",starFive:"empty"}),e.props.setRate(e.state.rating),console.log(e.state)},e.handleFive=function(){e.setState({rating:5,starOne:"",starTwo:"",starThree:"",starFour:"",starFive:""}),e.props.setRate(e.state.rating),console.log(e.state)},e}return Object(l.a)(a,[{key:"render",value:function(){return Object(j.jsx)("div",{children:Object(j.jsxs)("div",{className:"review__star__box",children:[Object(j.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"}),Object(j.jsx)("span",{onClick:this.handleOne,className:"fa fa-star ".concat(this.state.starOne)}),Object(j.jsx)("span",{onClick:this.handleTwo,className:"fa fa-star ".concat(this.state.starTwo)}),Object(j.jsx)("span",{onClick:this.handleThree,className:"fa fa-star ".concat(this.state.starThree)}),Object(j.jsx)("span",{onClick:this.handleFour,className:"fa fa-star ".concat(this.state.starFour)}),Object(j.jsx)("span",{onClick:this.handleFive,className:"fa fa-star ".concat(this.state.starFive)})]})})}}]),a}(n.Component),T=(a(91),s.a.forwardRef((function(e,t){return Object(j.jsxs)(s.a.Fragment,{children:[Object(j.jsx)("label",{className:"UploadWidget label",htmlFor:e.name,children:e.children}),Object(j.jsx)("input",{onChange:function(t){var a=t.target.files[0],n=URL.createObjectURL(a);e.onFileSelect&&e.onFileSelect(n)},ref:t,className:"UploadWidget input",id:e.name,name:e.name,type:"file"})]})}))),P=p(function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).beerId=e.props.beerId,e.userId=e.props.context.user._id,e.beerName=e.props.beerName,e.state={beername:e.beerName,beerid:e.beerId,userid:e.userId},e.imageRef=s.a.createRef(),e.handleChange=function(t){var a=t.target.value,n=t.target.name;e.setState(Object(g.a)({},n,a)),console.log(e.state)},e.handleSubmit=function(t){t.preventDefault();var a=e.state,n=a.beername,s={beerid:a.beerid,beername:n,userid:a.userid,rating:a.rating,comment:a.comment},r=new FormData;for(var i in e.state)"image"!==i&&r.append(i,e.state[i]);var c,l=Object(U.a)(r.entries());try{for(l.s();!(c=l.n()).done;){var o=c.value;console.log(o[0]+", "+o[1])}}catch(h){l.e(h)}finally{l.f()}e.imageRef.current.files[0]&&r.append("image",e.imageRef.current.files[0]),y.CreateReview(s).then((function(e){console.log(e,"success")})).catch((function(e){console.log(e)})),e.imageRef.current.files[0]&&y.Createimage(r).then((function(e){console.log(e,"success")})).catch((function(e){return console.log(e)})),e.props.onComplete()},e.handleFileSelect=function(t){e.setState({tmpUrl:t})},e.handleAddStars=function(t){e.setState({rating:t})},e}return Object(l.a)(a,[{key:"render",value:function(){return console.log(this.state),Object(j.jsxs)("section",{className:"details__review-form",children:[Object(j.jsx)("header",{className:"header",children:Object(j.jsxs)("h3",{children:["Add a Review of ",this.props.beerName]})}),Object(j.jsxs)("form",{autoComplete:"off",className:"form",onSubmit:this.handleSubmit,children:[Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)(A,{setRate:this.handleAddStars})}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("textarea",{className:"review-comment",id:"comment",type:"text",name:"comment",value:this.state.comment,placeholder:"Write your thoughts",onChange:this.handleChange})}),Object(j.jsxs)("div",{className:"newbeer__image-output",children:[Object(j.jsx)(T,{ref:this.imageRef,onFileSelect:this.handleFileSelect,name:"image",children:"Upload image"}),Object(j.jsx)("div",{className:"newbeer__image",children:this.state.tmpUrl?Object(j.jsx)("img",{src:this.state.tmpUrl,alt:"beer"}):""})]}),Object(j.jsx)("button",{className:"btn-submit",children:"Review Can"})]})]})}}]),a}(n.Component)),M=(a(92),function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).images=e.props.imagesList,e.state={photos:e.images,number:0,photo:0,showPhoto:!1},e.handleNextPhoto=function(){var t=e.state.photos.length;e.setState({number:e.state.number+1});var a=Math.abs(e.state.number)%t;e.setState({photo:a}),console.log(e.state.photo,e.state.number)},e.handlePreviousPhoto=function(){var t=e.state.photos.length;e.setState({number:e.state.number-1});var a=Math.abs(e.state.number)%t;e.setState({photo:a}),console.log(e.state.photo,e.state.number)},e.handleShowPhoto=function(t){e.setState({showPhoto:!e.state.showPhoto,photoClicked:t})},e.handleShowPhoto=function(t){e.setState({showPhoto:!e.state.showPhoto,photoClicked:t})},e.handleDeleteBeer=function(t){y.deleteImage(t).then((function(t){console.log("success",t),e.props.history.push("/profile")})).catch((function(e){console.log(e)}))},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state.photos,a=this.state.photo;return this.state.images?Object(j.jsx)("div",{children:"loading images..."}):Object(j.jsxs)("div",{className:"flex-center",children:[this.state.showPhoto&&Object(j.jsxs)("div",{className:"flex-center image__large-box",children:[Object(j.jsx)("img",{className:"image__large-image",src:this.state.photoClicked.image,alt:""}),Object(j.jsx)("h2",{children:this.state.photoClicked.beername}),Object(j.jsx)("h5",{children:"delete this image?"}),Object(j.jsx)("h5",{onClick:this.handleShowPhoto,children:"back"})]}),0===this.state.photos.length?Object(j.jsx)("div",{children:Object(j.jsx)("h2",{children:"no photos to display"})}):Object(j.jsxs)("div",{className:"image__gallery-box ",children:[Object(j.jsx)("p",{onClick:this.handlePreviousPhoto,children:"P"}),Object(j.jsxs)("div",{className:"image__gallery-grid",children:[Object(j.jsx)("div",{className:"flex-center image__image-box",onClick:function(){e.handleShowPhoto(t[a])},children:Object(j.jsx)("img",{className:"image__gallery-photo",src:t[a].image,alt:a})}),Object(j.jsx)("div",{className:"flex-center image__image-box",onClick:function(){e.handleShowPhoto(t[a+1])},children:this.state.photos.length>1?Object(j.jsx)("img",{className:"image__gallery-photo",src:t[a+1].image,alt:a+1}):""}),Object(j.jsx)("div",{className:"flex-center image__image-box",onClick:function(){e.handleShowPhoto(t[a+2])},children:this.state.photos.length>2?Object(j.jsx)("img",{className:"image__gallery-photo",src:t[a+2].image,alt:a+2}):""})]}),Object(j.jsx)("p",{onClick:this.handleNextPhoto,children:"N"})]})]})}}]),a}(n.Component)),V=a(19),E=function(e){var t,a=e.children,n=e.disabled,s=e.handleClick,r=Object(V.a)(e,["children","disabled","handleClick"]),i={primary:"primary",secondary:"secondary"};for(var c in r)i[c]&&(t=i[c]);return Object(j.jsx)("button",{disabled:n,id:"Btn",className:"Btn btn-".concat(t||""),onClick:s,children:a})},J=(a(93),function(e){var t=e.status,a=e.message;return Object(j.jsx)("div",{className:"FeedBack ".concat(t),children:Object(j.jsx)("p",{children:a})})}),G=(a(46),function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={search:"",results:[],isLoading:!1},e.handleSearch=function(t){e.setState({search:t.target.value,isLoading:!0}),clearTimeout(e.timeoutId),e.timeoutId=setTimeout((function(){e.performSearch()}),1e3)},e.performSearch=function(){""!==e.state.search?y.searchBreweries(e.state.search).then((function(t){e.setState({results:t,isLoading:!1})})):e.setState({results:[],isLoading:!1})},e}return Object(l.a)(a,[{key:"handleBreweryClicked",value:function(e){this.setState({search:e.name,results:[]}),console.log(this.props),this.props.onSelect(e)}},{key:"render",value:function(){var e=this;return Object(j.jsxs)("div",{className:"searchBrew__box",children:[Object(j.jsx)("h2",{children:"SearchBrew"}),Object(j.jsx)("input",{className:"searchBrew__bar",type:"text",value:this.state.search,onChange:this.handleSearch,name:"searchBrew",id:"searchBrew"}),Object(j.jsxs)("ul",{className:"searchBrew__results",children:[this.state.results.map((function(t){return Object(j.jsx)("li",{className:"searchBrew__list-item",onClick:function(){return e.handleBreweryClicked(t)},children:Object(j.jsx)("h4",{children:t.name})},t._id)})),this.state.isLoading&&Object(j.jsx)("li",{className:"searchBrew__list-item",children:"Brewery hunting..."})]})]})}}]),a}(n.Component));function X(e,t,a){if(!t||"object"!==typeof t||t instanceof Date||t instanceof File){var n=null==t?"":t;e.append(a,n)}else Object.keys(t).forEach((function(n){X(e,t[n],a?"".concat(a,"[").concat(n,"]"):n)}))}var z=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={httpResponse:null},e.imageRef=s.a.createRef(),e.formRef=s.a.createRef(),e.handleChange=function(t){var a="file"===t.target.type?t.target.files[0]:t.target.value,n=t.target.name;e.setState(Object(g.a)({},n,a))},e.handleSubmit=function(t){t.preventDefault();var a=new FormData,n=e.state;n.httpRespons;X(a,Object(V.a)(n,["httpRespons"])),y.editBeer(e.props.beer._id,a).then((function(t){e.setState({httpResponse:{status:"success",message:"beer successfully updated."}}),e.timeoutId=setTimeout((function(){e.setState({httpResponse:null})}),2e3),e.props.handleChange(t),e.props.handleClose()})).catch((function(t){e.setState({httpResponse:{status:"failure",message:"Something bad happened while updating your beer, try again later"}}),e.timeoutId=setTimeout((function(){e.setState({httpResponse:null})}),2e3)}))},e.handleFileSelect=function(t,a){e.setState({image:a})},e.handleBrewerySelect=function(t){e.setState({breweryname:t.name,breweryid:t._id})},e.handleAddStars=function(t){e.setState({rating:t})},e.handleDeleteBeer=function(t){y.deleteBeer(t).then((function(t){console.log("success",t),e.props.history.push("/beer")})).catch((function(e){console.log(e)}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setState({beer:this.props.beer,isLoading:!1})}},{key:"render",value:function(){var e=this;console.log(this.props);var t=this.state.httpResponse,a=this.props.beer,n=a.name,s=a.description,r=a.abv,i=a.breweryname,c=a.releasedate,l=(a.breweryid,a.rating,a.date,a._id);return Object(j.jsxs)("section",{className:"form-section",children:[Object(j.jsxs)("form",{autoComplete:"off",className:"form",onSubmit:this.handleSubmit,children:[Object(j.jsxs)("h1",{className:"header",children:["Edit this can ",Object(j.jsx)("span",{onClick:this.props.handleClose,children:"X"})]}),Object(j.jsx)("div",{className:"round-image widget-image",children:Object(j.jsx)("img",{src:this.state.tmpUrl||this.props.beer.image,alt:n})}),Object(j.jsx)("div",{className:"form-group-uploadwidget",children:Object(j.jsx)(T,{onFileSelect:this.handleFileSelect,name:"image",children:"Change image"})}),t&&Object(j.jsx)(J,{message:t.message,status:t.status}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("input",{className:"input",id:"name",type:"text",name:"name",onChange:this.handleChange,defaultValue:n})}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("textarea",{className:"input",id:"description",type:"text",name:"description",defaultValue:s})}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)(A,{setRate:this.handleAddStars})}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsxs)("h2",{children:["Current brewery: ",i]}),Object(j.jsx)(G,{onSelect:this.handleBrewerySelect})]}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("input",{className:"form__input",onChange:this.handleChange,defaultValue:r,type:"number",name:"abv",id:"abv"})}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("input",{className:"input",id:"releasedate",type:"number",name:"releasedate",onChange:this.handleChange,defaultValue:c})}),Object(j.jsx)(E,{primary:!0,children:"Save"})]}),Object(j.jsxs)("h3",{children:["Or, if you're sure... ",Object(j.jsx)("b",{onClick:function(){return e.handleDeleteBeer(l)},children:"delete"})," this beer"]})]})}}]),a}(n.Component);z.contextType=u;var W=Object(d.g)(z),Y=(a(47),p(function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).beerId=e.props.match.params.id,e.state={user:null,beer:null,userBeers:null,alreadyDrunk:!1,reviewForm:!1,imageForm:!1,beerImages:null,beerReviews:null,showSettings:!1},e.handleAddBeer=function(){y.addUserBeer(e.beerId).then((function(t){console.log("success"),e.setState({alreadyDrunk:!e.state.alreadyDrunk})})).catch((function(e){return console.log(e)}))},e.handleRemoveBeer=function(){y.removeUserBeer(e.beerId).then((function(t){console.log("success"),e.setState({alreadyDrunk:!e.state.alreadyDrunk,reviewForm:!1,imageForm:!1})})).catch((function(e){return console.log(e)}))},e.handleShowReview=function(){console.log("click"),e.setState({reviewForm:!e.state.reviewForm})},e.handleShowImage=function(){e.setState({imageForm:!e.state.imageForm})},e.handleShowSettings=function(){e.setState({showSettings:!e.state.showSettings})},e.handleBeerChange=function(t){e.setState({beer:t})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.context.user;this.setState({user:t,userBeers:t.beers}),y.getOneBeer(this.beerId).then((function(t){void 0===t.name&&e.props.history.push("/*"),e.setState({beer:t})})).catch((function(e){console.log(e)})),t.beers.includes(this.beerId)&&this.setState({alreadyDrunk:!0}),y.getBeerImages(this.beerId).then((function(t){t.length>0?e.setState({beerImages:t}):e.setState({beerImages:[]})})).catch((function(e){console.log(e)})),y.getBeerReviews(this.beerId).then((function(t){t.length>0?e.setState({beerReviews:t}):e.setState({beerReviews:[]})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){if(null===this.state.user)return Object(j.jsx)("div",{children:"One sec, just heading to the bar..."});if(null===this.state.beer)return Object(j.jsx)("div",{children:"One sec, just heading to the bar..."});if(null===this.state.beerImages)return Object(j.jsx)("div",{children:"One sec, just heading to the bar..."});if(null===this.state.beerReviews)return Object(j.jsx)("div",{children:"One sec, just heading to the bar..."});var e=this.state.beer;return Object(j.jsxs)("div",{className:"details__main",children:[Object(j.jsxs)("div",{className:"details__link-bar",children:[this.state.alreadyDrunk?Object(j.jsxs)("div",{className:"flex-center",children:[Object(j.jsx)("h3",{children:"Canned!"}),Object(j.jsxs)("div",{className:"details__canned-options",children:[Object(j.jsx)("h3",{onClick:this.handleShowReview,children:"Review"}),Object(j.jsx)("h3",{onClick:this.handleRemoveBeer,children:"un-Can?"})]})]}):Object(j.jsx)("h3",{onClick:this.handleAddBeer,children:"Tried this one before? Can it!"}),this.state.reviewForm&&Object(j.jsx)(P,{beerName:e.name,beerId:this.beerId,onComplete:this.handleShowReview})]}),Object(j.jsxs)("div",{className:"details__box",children:[Object(j.jsxs)("div",{className:"details__top-box",children:[Object(j.jsx)("div",{className:"details__image-box",children:Object(j.jsx)("img",{className:"details__image",src:e.image,alt:"beer"})}),Object(j.jsxs)("div",{className:"details__info-box",children:[Object(j.jsx)("h1",{children:e.name}),Object(j.jsx)("h4",{onClick:this.handleShowSettings,children:"settings"}),Object(j.jsx)("h4",{children:e.breweryname}),Object(j.jsx)("div",{className:"details__rating",children:Object(j.jsx)(F,{rating:e.rating})}),Object(j.jsxs)("p",{children:[e.abv,"% ABV"]})]}),this.state.showSettings&&Object(j.jsx)("div",{className:"overflow settings-box",children:Object(j.jsx)(W,{beer:this.state.beer,handleChange:this.handleBeerChange,handleClose:this.handleShowSettings})})]}),Object(j.jsx)("div",{className:"details__image-scroll",children:this.state.beerImages.length>0?Object(j.jsx)(M,{imagesList:this.state.beerImages}):Object(j.jsx)("h1",{children:"The beer has no Can snaps yet!"})}),Object(j.jsx)("div",{className:"details__description",children:Object(j.jsx)("p",{children:e.description})}),Object(j.jsx)(m.b,{exact:!0,to:"/beers/edit/".concat(this.beerID),className:"home__link",children:Object(j.jsx)("h3",{children:"Edit this beer"})}),Object(j.jsx)("h3",{children:"Comments"}),Object(j.jsx)("ul",{children:this.state.beerReviews.map((function(e){return Object(j.jsxs)("li",{children:[Object(j.jsx)(F,{rating:e.rating}),Object(j.jsx)("p",{children:e.comment})]})}))})]})]})}}]),a}(n.Component))),H=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={beers:null,sendBeer:[],popUp:!1},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;y.getUserBeers().then((function(t){e.setState({beers:t})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return null===this.state.beers?Object(j.jsx)("div",{children:"One sec, just heading to the bar..."}):Object(j.jsx)("div",{className:"beer__main-list",children:Object(j.jsx)("ul",{className:"beer__list",children:this.state.beers.map((function(e){return Object(j.jsx)("li",{className:"beer__list-item",children:Object(j.jsxs)("div",{className:"beer__box",children:[Object(j.jsx)("div",{className:"beer__image-box",children:Object(j.jsx)("img",{className:"beer__image",src:e.image,alt:e.name})}),Object(j.jsxs)("div",{className:"beer__info",children:[Object(j.jsx)(m.b,{exact:!0,to:"/beer-detail/".concat(e._id),children:Object(j.jsx)("h3",{children:e.name})}),Object(j.jsx)("h4",{children:e.breweryname}),Object(j.jsx)(F,{rating:e.rating})]})]})},e._id)}))})})}}]),a}(n.Component),K=(a(94),function(){return Object(j.jsx)("div",{className:"home__main",children:Object(j.jsx)("h1",{className:"home__title",children:"Canned!"})})}),q=a(35),Q=(a(115),a(7)),Z=a.n(Q);a(56);Z.a.workerClass=a(116).default;var $=Object(q.b)({accessToken:"pk.eyJ1Ijoicm10d2lsbGlhbXMiLCJhIjoiY2ttbThvcXNwMGRyazJ3bGVwdG9sbnRzcSJ9.0R-H-K5vBBYCOD9m6cCxXw"}),ee=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={breweries:null,longitude:null,latitude:null,breweryClicked:null,showDetails:!1,showName:!1},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setState({breweries:this.props.breweryList,longitude:this.props.longitude,latitude:this.props.latitude})}},{key:"componentDidUpdate",value:function(){this.setState({longitude:this.props.longitude,latitude:this.props.latitude})}},{key:"render",value:function(){var e=this;return null===this.state.breweries||null===this.state.longitude||null===this.state.latitude?Object(j.jsx)("div",{children:" loading map... "}):Object(j.jsx)("div",{className:"map__main",children:Object(j.jsx)($,{style:"mapbox://styles/mapbox/streets-v10",zoom:[11],containerStyle:{top:"8.2vh",left:0,bottom:0,right:0,position:"absolute"},center:[this.state.longitude,this.state.latitude],children:this.state.breweries.map((function(t){return Object(j.jsx)(q.a,{coordinates:[t.longitude,t.latitude],anchor:"bottom",onClick:function(){return e.props.markerClick(t)},children:Object(j.jsx)("img",{className:"map-marker",src:"https://res.cloudinary.com/dahzswwzk/image/upload/v1617034208/Basic_UI_Icon_Pack_-_Flat_map_pointer-512_d9c33w.webp",alt:"marker"})},t._id)}))})})}}]),a}(s.a.PureComponent),te=(a(117),function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={search:"",results:[],isLoading:!1},e.handleSearchChange=function(t){e.setState({search:t.target.value,isLoading:!0}),clearTimeout(e.timeoutId),e.timeoutId=setTimeout((function(){e.performSearch()}),1e3)},e.performSearch=function(){""!==e.state.search?x.a.get("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(e.state.search,".json?access_token=pk.eyJ1Ijoicm10d2lsbGlhbXMiLCJhIjoiY2ttbThvcXNwMGRyazJ3bGVwdG9sbnRzcSJ9.0R-H-K5vBBYCOD9m6cCxXw")).then((function(t){e.setState({results:t.data.features,isLoading:!1})})):e.setState({results:[],isLoading:!1})},e.handleItemClicked=function(t){e.setState({search:t.place_name,results:[]}),e.props.onSelect(t)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.results,n=t.isLoading;return Object(j.jsxs)("div",{className:"AutocompletePlace",children:[Object(j.jsx)("input",{className:"input",type:"text",value:this.props.defaultValue||this.state.search,onChange:this.handleSearchChange,placeholder:"Type an address"}),Object(j.jsxs)("ul",{className:"AutocompletePlace-results",children:[a.map((function(t){return Object(j.jsx)("li",{className:"AutocompletePlace-items",onClick:function(){return e.handleItemClicked(t)},children:t.place_name},t.id)})),n&&Object(j.jsx)("li",{className:"AutocompletePlace-items",children:"Loading..."})]})]})}}]),a}(n.Component)),ae=(a(57),function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={selectedBeer:null,rating:null,name:null,description:null,website:null,establisheddate:2021,address:null,latitude:null,longitude:null},e.imageRef=s.a.createRef(),e.handleChange=function(t){var a=t.target.value,n=t.target.name;e.setState(Object(g.a)({},n,a))},e.handleOnSubmit=function(t){t.preventDefault();var a=new FormData;for(var n in e.state)"image"!==n&&a.append(n,e.state[n]);var s,r=Object(U.a)(a.entries());try{for(r.s();!(s=r.n()).done;){var i=s.value;console.log(i[0]+", "+i[1])}}catch(c){r.e(c)}finally{r.f()}e.imageRef.current.files[0]&&a.append("image",e.imageRef.current.files[0]),y.CreateBrewery(a).then((function(t){console.log("success",t),e.setState({rating:null,name:null,description:null,website:null,establisheddate:2021,address:null,latitude:null,longitude:null})})).catch((function(e){console.log(e)}))},e.handleFileSelect=function(t){e.setState({tmpUrl:t})},e.handleAddressSelect=function(t){console.log(t),e.setState({address:t.place_name,longitude:t.geometry.coordinates[0],latitude:t.geometry.coordinates[1]})},e.handleAddStars=function(t){e.setState({rating:t})},e}return Object(l.a)(a,[{key:"render",value:function(){return Object(j.jsx)("div",{className:"newbeer__main",children:Object(j.jsxs)("form",{className:"form newbeer__activeform",onSubmit:this.handleOnSubmit,children:[Object(j.jsx)("label",{className:"form__label",htmlFor:"name",children:"Name"}),Object(j.jsx)("input",{className:"form__input",onChange:this.handleChange,value:this.state.name,type:"text",name:"name",id:"name"}),Object(j.jsx)("label",{className:"form__label",htmlFor:"description",children:"Description"}),Object(j.jsx)("textarea",{className:"form__input",onChange:this.handleChange,value:this.state.description,type:"text",name:"description",id:"description"}),Object(j.jsx)("label",{className:"form__label",htmlFor:"name",children:"Website"}),Object(j.jsx)("input",{className:"form__input",onChange:this.handleChange,value:this.state.website,type:"text",name:"website",id:"website"}),Object(j.jsxs)("div",{className:"newbeer__small-details",children:[Object(j.jsx)("label",{className:"year__label",htmlFor:"year",children:"Brewery established in"}),Object(j.jsx)("input",{className:"form__input",onChange:this.handleChange,value:this.state.establisheddate,type:"number",name:"establisheddate",id:"establisheddate"}),Object(j.jsx)(A,{setRate:this.handleAddStars})]}),Object(j.jsx)(te,{onSelect:this.handleAddressSelect}),Object(j.jsxs)("div",{className:"newbeer__image-output",children:[Object(j.jsx)(T,{ref:this.imageRef,onFileSelect:this.handleFileSelect,name:"image",children:"Upload image"}),Object(j.jsx)("div",{className:"newbeer__image",children:this.state.tmpUrl?Object(j.jsx)("img",{src:this.state.tmpUrl,alt:"beer"}):""})]}),Object(j.jsx)("button",{className:"form__button",children:"ADD NEW"})]})})}}]),a}(n.Component));ae.contextType=u;var ne=ae,se=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={httpResponse:null},e.imageRef=s.a.createRef(),e.formRef=s.a.createRef(),e.handleChange=function(t){var a="file"===t.target.type?t.target.files[0]:t.target.value,n=t.target.name;e.setState(Object(g.a)({},n,a))},e.handleSubmit=function(t){t.preventDefault();var a=new FormData,n=e.state;n.httpRespons;X(a,Object(V.a)(n,["httpRespons"])),y.editBrewery(e.props.brewery._id,a).then((function(t){e.setState({httpResponse:{status:"success",message:"beer successfully updated."}}),e.timeoutId=setTimeout((function(){e.setState({httpResponse:null})}),2e3),e.props.handleChange(t),e.props.handleClose()})).catch((function(t){e.setState({httpResponse:{status:"failure",message:"Something bad happened while updating your beer, try again later"}}),e.timeoutId=setTimeout((function(){e.setState({httpResponse:null})}),2e3)}))},e.handleFileSelect=function(t,a){e.setState({image:a})},e.handleAddressSelect=function(t){e.setState({address:t.place_name,longitude:t.geometry.coordinates[0],latitude:t.geometry.coordinates[1]})},e.handleAddStars=function(t){e.setState({rating:t})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setState({brewery:this.props.brewery,isLoading:!1})}},{key:"render",value:function(){var e=this.state.httpResponse,t=this.props.brewery,a=t.name,n=t.description,s=t.website,r=(t.breweryname,t.establisheddate),i=t.address;t.latitude,t.longitude,t.rating,t._id;return Object(j.jsx)("section",{className:"form-section",children:Object(j.jsxs)("form",{autoComplete:"off",className:"form",onSubmit:this.handleSubmit,children:[Object(j.jsxs)("h1",{className:"header",children:["Edit this brewery ",Object(j.jsx)("span",{onClick:this.props.handleClose,children:"X"})]}),Object(j.jsx)("div",{className:"round-image widget-image",children:Object(j.jsx)("img",{src:this.state.tmpUrl||this.props.brewery.image,alt:a})}),Object(j.jsx)("div",{className:"form-group-uploadwidget",children:Object(j.jsx)(T,{onFileSelect:this.handleFileSelect,name:"image",children:"Change image"})}),e&&Object(j.jsx)(J,{message:e.message,status:e.status}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("input",{className:"input",id:"name",type:"text",name:"name",onChange:this.handleChange,defaultValue:a})}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("textarea",{className:"input",id:"description",type:"text",name:"description",defaultValue:n})}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)(A,{setRate:this.handleAddStars})}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsxs)("h2",{children:["Current brewery address: ",i]}),Object(j.jsx)(te,{onSelect:this.handleAddressSelect})]}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("input",{className:"form__input",onChange:this.handleChange,defaultValue:s,type:"text",name:"website",id:"website"})}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("input",{className:"input",id:"establisheddate",type:"number",name:"establisheddate",onChange:this.handleChange,defaultValue:r})}),Object(j.jsx)(E,{primary:!0,children:"Save"})]})})}}]),a}(n.Component);se.contextType=u;var re=Object(d.g)(se),ie=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={brewery:null,breweryBeers:null,beerList:!1,showSettings:!1},e.handleAddBeer=function(){y.addUserBeer(e.beerId).then((function(t){console.log("success"),e.setState({alreadyDrunk:!e.state.alreadyDrunk})})).catch((function(e){return console.log(e)}))},e.handleRemoveBeer=function(){y.removeUserBeer(e.beerId).then((function(t){console.log("success"),e.setState({alreadyDrunk:!e.state.alreadyDrunk,reviewForm:!1,imageForm:!1})})).catch((function(e){return console.log(e)}))},e.handleBeerList=function(){e.setState({beerList:!0})},e.handleDescription=function(){e.setState({beerList:!1})},e.handleShowSettings=function(){e.setState({showSettings:!e.state.showSettings})},e.handleBreweryChange=function(t){e.setState({brewery:t})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({brewery:this.props.brewery});var t=this.props.brewery._id;y.getBreweryBeers(t).then((function(t){console.log(t),e.setState({breweryBeers:t})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){if(null===this.state.brewery)return Object(j.jsx)("div",{children:"One sec, just heading to the bar..."});if(null===this.state.breweryBeers)return Object(j.jsx)("div",{children:"One sec, just heading to the bar..."});var e=this.state.brewery;return Object(j.jsx)("div",{className:"details__main",children:Object(j.jsxs)("div",{className:"details__box",children:[Object(j.jsx)("div",{onClick:this.props.closePopUp,children:Object(j.jsx)("h2",{children:"back to map"})}),Object(j.jsxs)("div",{className:"details__top-box",children:[Object(j.jsx)("div",{className:"details__image-box",children:Object(j.jsx)("img",{className:"details__image",src:e.image,alt:"brewery"})}),Object(j.jsxs)("div",{className:"details__info-box",children:[Object(j.jsx)("h1",{children:e.name}),Object(j.jsx)("h4",{onClick:this.handleShowSettings,children:"settings"}),Object(j.jsx)("div",{className:"details__rating",children:Object(j.jsx)(F,{rating:e.rating})}),Object(j.jsxs)("h4",{children:["Established in ",e.establisheddate]}),Object(j.jsx)("h4",{children:e.address}),Object(j.jsxs)("p",{children:["Check them out ",e.website]})]})]}),this.state.showSettings&&Object(j.jsx)("div",{className:"overflow settings-box",children:Object(j.jsx)(re,{brewery:this.state.brewery,handleChange:this.handlebreweryChange,handleClose:this.handleShowSettings})}),Object(j.jsxs)("div",{className:"beer__list-type",children:[Object(j.jsx)("div",{onClick:this.handleDescription,className:"beer__list-switch",children:Object(j.jsx)("h2",{children:"Details"})}),Object(j.jsx)("div",{onClick:this.handleBeerList,className:"beer__list-switch",children:Object(j.jsx)("h2",{children:"Beers"})})]}),this.state.beerList?Object(j.jsx)("div",{children:Object(j.jsx)(L,{beerList:this.state.breweryBeers})}):Object(j.jsx)("div",{className:"details__description",children:Object(j.jsx)("p",{children:e.description})})]})})}}]),a}(n.Component),ce=p(function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).userCity=e.props.context.user.city,e.state={breweries:null,selectedBrewery:null,userCity:e.userCity,longitude:null,latitude:null,showForm:!1,showDetails:!1,showName:!1},e.handleShowDetails=function(){e.setState({showDetails:!e.state.showDetails,showName:!1})},e.handleBrewerySelect=function(t){e.setState({breweryClicked:t,longitude:t.longitude,latitude:t.latitude,showName:!0})},e.handleMarkerClick=function(t){console.log(t),e.setState({longitude:t.longitude,latitude:t.latitude,breweryClicked:t,showName:!0})},e.handleShowForm=function(){e.setState({showForm:!e.state.showForm})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;y.getBreweries().then((function(t){e.setState({breweries:t})})).catch((function(e){return console.log(e)})),x.a.get("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(this.state.userCity,".json?access_token=").concat("pk.eyJ1Ijoicm10d2lsbGlhbXMiLCJhIjoiY2ttbThvcXNwMGRyazJ3bGVwdG9sbnRzcSJ9.0R-H-K5vBBYCOD9m6cCxXw")).then((function(t){var a=t.data.features[0];console.log(a),e.setState({longitude:a.geometry.coordinates[0],latitude:a.geometry.coordinates[1]})}))}},{key:"render",value:function(){return null===this.state.breweries||null===this.state.userCity||null===this.state.longitude||null===this.state.latitude?Object(j.jsx)("div",{children:"fetching your brewery map"}):(console.log(this.state),Object(j.jsxs)("div",{children:[Object(j.jsx)("h4",{onClick:this.handleShowForm,children:"Can't find your brewery? add it here"}),this.state.showForm&&Object(j.jsx)("div",{className:"map__brewery-form",children:Object(j.jsx)(ne,{})}),this.state.showName&&Object(j.jsx)("div",{onClick:this.handleShowDetails,className:"flex-center map__showname-box",children:Object(j.jsx)("h3",{children:this.state.breweryClicked.name})}),this.state.showDetails&&Object(j.jsx)("div",{className:"map__show-details-box overflow",children:Object(j.jsx)(ie,{closePopUp:this.handleShowDetails,brewery:this.state.breweryClicked})}),Object(j.jsx)("div",{className:"map__search-box",children:Object(j.jsx)(G,{onSelect:this.handleBrewerySelect})}),Object(j.jsx)("div",{className:"map__map-container",children:Object(j.jsx)(ee,{markerClick:this.handleMarkerClick,breweryList:this.state.breweries,longitude:this.state.longitude,latitude:this.state.latitude})})]}))}}]),a}(n.Component)),le=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={search:"",results:[],isLoading:!1},e.handleSearch=function(t){e.setState({search:t.target.value,isLoading:!0}),clearTimeout(e.timeoutId),e.timeoutId=setTimeout((function(){e.performSearch()}),1e3)},e.performSearch=function(){""!==e.state.search?y.searchBeers(e.state.search).then((function(t){e.setState({results:t,isLoading:!1})})):e.setState({results:[],isLoading:!1})},e}return Object(l.a)(a,[{key:"handleBeerClicked",value:function(e){this.setState({search:e.name,results:[]}),console.log(this.props),this.props.onSelect(e)}},{key:"render",value:function(){var e=this;return Object(j.jsxs)("div",{className:"search__box",children:[Object(j.jsx)("h2",{children:"Search"}),Object(j.jsx)("input",{className:"search__bar",type:"text",value:this.state.search,onChange:this.handleSearch,name:"search",id:"search"}),Object(j.jsxs)("ul",{className:"search__results",children:[this.state.results.map((function(t){return Object(j.jsx)("li",{className:"search__list-item",onClick:function(){return e.handleBeerClicked(t)},children:Object(j.jsxs)("h4",{children:[t.name," - ",t.breweryname]})},t._id)})),this.state.isLoading&&Object(j.jsx)("li",{className:"search__list-item",children:"Beer hunting..."})]})]})}}]),a}(n.Component),oe=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={showSearch:!1,showForm:!1,selectedBeer:null,rating:null,name:"",description:"",abv:0,breweryname:"",breweryid:null,releasedate:2021},e.imageRef=s.a.createRef(),e.handleChange=function(t){var a=t.target.value,n=t.target.name;e.setState(Object(g.a)({},n,a))},e.handleFormClick=function(){e.setState({showForm:!e.state.showForm})},e.handleSearchClick=function(){e.setState({showSearch:!e.state.showSearch}),e.state.showForm&&e.setState({showForm:!1})},e.handleOnSubmit=function(t){t.preventDefault();var a=new FormData;for(var n in e.state)"image"!==n&&a.append(n,e.state[n]);var s,r=Object(U.a)(a.entries());try{for(r.s();!(s=r.n()).done;){var i=s.value;console.log(i[0]+", "+i[1])}}catch(c){r.e(c)}finally{r.f()}e.imageRef.current.files[0]&&a.append("image",e.imageRef.current.files[0]),y.CreateBeer(a).then((function(t){console.log("success",t),y.addUserBeer(t._id).then((function(e){console.log("success",e)})).catch((function(e){console.log(e)})),e.setState({rating:null,name:"",description:"",abv:0,breweryname:"",breweryid:null,releasedate:2021})})).catch((function(e){console.log(e)}))},e.handleFileSelect=function(t){e.setState({tmpUrl:t})},e.handleBeerSelect=function(t){e.setState({selectedBeer:t,showSearch:!1,showForm:!1}),y.addUserBeer(t._id).then((function(e){console.log("success",e)})).catch((function(e){console.log(e)}))},e.handleBrewerySelect=function(t){e.setState({breweryname:t.name,breweryid:t._id})},e.handleAddStars=function(t){e.setState({rating:t})},e}return Object(l.a)(a,[{key:"render",value:function(){return console.log(this.state),Object(j.jsxs)("div",{className:"newbeer__main",children:[Object(j.jsx)("div",{className:"newbeer__link flex-center",children:Object(j.jsxs)("h1",{className:"",onClick:this.handleSearchClick,children:[" ",this.state.showSearch?"-":"+"," Add Beer"]})}),Object(j.jsx)("div",{children:this.state.showSearch&&Object(j.jsxs)("div",{className:"newbeer__search flex-center",children:[Object(j.jsx)(le,{onSelect:this.handleBeerSelect}),Object(j.jsxs)("h4",{onClick:this.handleFormClick,children:[this.state.showForm?"-":"+"," can't find it? Let's add it to the Canniverse"]})]})}),this.state.showForm&&Object(j.jsxs)("form",{className:"form newbeer__activeform",onSubmit:this.handleOnSubmit,children:[Object(j.jsx)("label",{className:"form__label",htmlFor:"name",children:"Name"}),Object(j.jsx)("input",{className:"form__input",onChange:this.handleChange,value:this.state.name,type:"text",name:"name",id:"name"}),Object(j.jsx)("label",{className:"form__label",htmlFor:"description",children:"Description"}),Object(j.jsx)("textarea",{className:"form__input",onChange:this.handleChange,value:this.state.description,type:"text",name:"description",id:"description"}),Object(j.jsxs)("div",{className:"newbeer__small-details",children:[Object(j.jsx)("label",{className:"abv__label",htmlFor:"abv",children:"ABV"}),Object(j.jsx)("input",{className:"form__input",onChange:this.handleChange,value:this.state.abv,type:"number",name:"abv",id:"abv"}),Object(j.jsx)("label",{className:"year__label",htmlFor:"year",children:"Release date"}),Object(j.jsx)("input",{className:"form__input",onChange:this.handleChange,value:this.state.releasedate,type:"number",name:"releasedate",id:"releasedate"}),Object(j.jsx)(A,{setRate:this.handleAddStars})]}),Object(j.jsx)(G,{onSelect:this.handleBrewerySelect}),Object(j.jsxs)("div",{className:"newbeer__image-output",children:[Object(j.jsx)(T,{ref:this.imageRef,onFileSelect:this.handleFileSelect,name:"image",children:"Upload image"}),Object(j.jsx)("div",{className:"newbeer__image",children:this.state.tmpUrl?Object(j.jsx)("img",{src:this.state.tmpUrl,alt:"beer"}):""})]}),Object(j.jsx)("button",{className:"form__button",children:"ADD NEW"})]})]})}}]),a}(n.Component);oe.contextType=u;var he=oe,de=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={userName:null,email:null,city:null,tmpUrl:"",httpResponse:null,isLoading:!0},e.imageRef=s.a.createRef(),e.handleChange=function(t){var a=t.target.name,n=t.target.value;e.setState(Object(g.a)({},a,n))},e.isValidInput=function(t){return""!==e.state[t]},e.checkError=function(){for(var t in e.state)if(""===e.state[t])return!0;return!1},e.handleSubmit=function(t){t.preventDefault();var a=new FormData;for(var n in e.state)a.append(n,e.state[n]);y.editUser(a).then((function(){y.getUser().then((function(t){e.context.setUser(t)})),e.setState({httpResponse:{status:"success",message:"Profile successfully updated."}}),e.timeoutId=setTimeout((function(){e.setState({httpResponse:null})}),2e3)})).catch((function(t){e.setState({httpResponse:{status:"failure",message:"Something bad happened while updating your profile, try again later"}}),e.timeoutId=setTimeout((function(){e.setState({httpResponse:null})}),2e3)}))},e.handleDeleteUser=function(){y.deleteUser().then((function(t){console.log("success",t),e.props.history.push("/")})).catch((function(e){console.log(e)}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;y.getUser().then((function(t){e.setState({userName:t.userName,email:t.email,city:t.city,isLoading:!1})})).catch((function(t){e.setState({isLoading:!1,httpResponse:{status:"failure",message:"Something bad happened, please try again later"}})}))}},{key:"render",value:function(){var e=this.state.httpResponse;return this.state.isLoading?Object(j.jsx)("div",{children:"Loading..."}):(console.log(),Object(j.jsx)("section",{className:"form-section",children:Object(j.jsxs)("form",{autoComplete:"off",className:"form",onSubmit:this.handleSubmit,children:[Object(j.jsx)("h1",{className:"header",children:"Edit your profile"}),e&&Object(j.jsx)(J,{message:e.message,status:e.status}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("input",{className:"input",id:"userName",type:"text",name:"userName",onChange:this.handleChange,value:this.state.userName}),!this.isValidInput("userName")&&Object(j.jsx)("p",{className:"input-error",children:"Invalid input"})]}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("input",{className:"input",id:"email",type:"email",name:"email",value:this.state.email,disabled:!0})}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("input",{className:"input",id:"city",type:"text",name:"city",onChange:this.handleChange,value:this.state.city}),!this.isValidInput("city")&&Object(j.jsx)("p",{className:"input-error",children:"Invalid input"})]}),Object(j.jsx)(E,{primary:!0,children:"Save"})]})}))}}]),a}(n.Component);de.contextType=u;var ue=Object(d.g)(de),me=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={},e.handleChange=function(t){var a=t.target.value,n=t.target.name;e.setState(Object(g.a)({},n,a))},e.handleSubmit=function(t){t.preventDefault();var a=e.state,n={userid:a.userid,beerid:a.beerid,beername:a.beername,breweryid:a.breweryid,rating:a.rating,comment:a.comment};console.log(n),y.editReview(e.props.review._id,n).then((function(t){console.log("success",t),e.props.handleClose()})).catch((function(e){console.log(e)}))},e.handleAddStars=function(t){e.setState({rating:t})},e.handleDeleteBeer=function(t){y.deleteReview(t).then((function(t){console.log("success",t),e.props.handleClose(),e.props.history.push("/profile")})).catch((function(e){console.log(e)}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.review;this.setState({userid:e.userid,beerid:e.beerid,beername:e.beername,breweryid:e.breweryid,rating:e.rating,comment:e.comment})}},{key:"render",value:function(){var e=this;return Object(j.jsxs)("section",{className:"form-section",children:[Object(j.jsxs)("form",{autoComplete:"off",className:"form",onSubmit:this.handleSubmit,children:[Object(j.jsxs)("h1",{className:"header",children:["Edit your review ",Object(j.jsx)("span",{onClick:this.props.handleClose,children:"X"})]}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("textarea",{className:"input",id:"comment",type:"text",name:"comment",onChange:this.handleChange,defaultValue:this.state.comment})}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)(A,{setRate:this.handleAddStars})}),Object(j.jsx)(E,{primary:!0,children:"Save"})]}),Object(j.jsxs)("h3",{children:["Or, if you're sure... ",Object(j.jsx)("b",{onClick:function(){return e.handleDeleteReview(e.props.review._id)},children:"delete"})," this review"]})]})}}]),a}(n.Component);me.contextType=u;var be=Object(d.g)(me),je=(a(118),p(function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={user:null,beers:null,images:null,reviews:null,beerCount:null,reviewCLicked:null,showSettings:!1,reviewEdit:!1,imageBox:!1},e.handleShowPhoto=function(){e.setState({imageBox:!e.state.imageBox})},e.handleNextPhoto=function(){e.setState({imageNumber:e.state.imageNumber+1})},e.handlePreviousPhoto=function(){e.setState({imageNumber:e.state.imageNumber-1})},e.handleReviewClicked=function(t){e.setState({reviewCLicked:t,reviewEdit:!0})},e.handleReviewClose=function(){e.setState({reviewEdit:!1})},e.handleShowSettings=function(){e.setState({showSettings:!e.state.showSettings})},e.handleLogout=function(){var t=e.props.context;y.logout().then((function(){t.removeUser(),e.props.history.push("/")})).catch((function(e){console.log(e)}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.context.user;this.setState({user:t}),y.getUserBeers().then((function(t){e.setState({beers:t,beerCount:t.length})})).catch((function(e){return console.log(e)})),y.getUserReviews().then((function(t){var a=Object(R.a)(t);a.sort((function(e,t){return t.updated_at-e.updated_at})),e.setState({reviews:a})})).catch((function(e){return console.log(e)})),y.getUserImages().then((function(t){var a=Object(R.a)(t);a.sort((function(e,t){return t.updated_at-e.updated_at})),e.setState({images:a})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;if(null===this.state.user)return Object(j.jsx)("div",{children:"loading..."});if(null===this.state.images)return Object(j.jsx)("div",{children:"loading..."});if(null===this.state.reviews)return Object(j.jsx)("div",{children:"loading..."});if(null===this.state.beers)return Object(j.jsx)("div",{children:"loading..."});console.log(this.state);var t=this.state.user,a=this.state.reviews.slice(0,3);return Object(j.jsxs)("div",{className:"flex-center profile__main",children:[Object(j.jsx)(he,{}),Object(j.jsxs)("div",{className:"flex-center profile__header",children:[Object(j.jsxs)("h1",{children:["Welcome ",t.userName," "]}),Object(j.jsx)("p",{onClick:this.handleShowSettings,children:"settings"}),Object(j.jsx)("h2",{children:t.city}),Object(j.jsxs)("h2",{children:["Beer count: ",this.state.beerCount]}),Object(j.jsx)(m.b,{exact:!0,to:"/user-beer",children:Object(j.jsx)("h3",{children:"Check your beers"})})]}),this.state.showSettings&&Object(j.jsxs)("div",{className:"flex-center profile__settings-box",children:[Object(j.jsx)("h2",{onClick:this.handleLogout,children:"Logout"}),Object(j.jsx)("h2",{children:"Update your profile"}),Object(j.jsx)(ue,{handleClose:this.handleShowSettings})]}),Object(j.jsx)("h1",{children:"latest images"}),Object(j.jsx)(M,{imagesList:this.state.images,onSelect:this.handleShowPhoto}),Object(j.jsx)("h1",{children:"latest reviews"}),this.state.reviewEdit&&Object(j.jsxs)("div",{className:"flex-center profile__settings-box",children:[Object(j.jsx)("h2",{children:"Update this comment"}),Object(j.jsx)(be,{review:this.state.reviewCLicked,handleClose:this.handleReviewClose})]}),Object(j.jsx)("ul",{children:a.map((function(t){return Object(j.jsxs)("li",{children:[Object(j.jsx)(m.b,{exact:!0,to:"/beer-detail/".concat(t.beerid),children:Object(j.jsxs)("h3",{children:[t.beername," score: ",t.rating]})}),Object(j.jsx)("h4",{onClick:function(){return e.handleReviewClicked(t)},children:"edit"}),Object(j.jsx)("p",{children:t.comment})]})}))})]})}}]),a}(n.Component))),pe=(a(119),function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={user:null,isLoggedIn:!1,loading:!0},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)("div",{className:"app__main-block overflow",children:Object(j.jsxs)(d.d,{children:[Object(j.jsx)(d.b,{exact:!0,path:"/",component:K}),Object(j.jsx)(d.b,{exact:!0,path:"/signin",component:N}),Object(j.jsx)(d.b,{exact:!0,path:"/signup",component:B}),Object(j.jsx)(d.b,{exact:!0,path:"/beer",component:I}),Object(j.jsx)(d.b,{exact:!0,path:"/user-beer",component:H}),Object(j.jsx)(d.b,{exact:!0,path:"/beer-detail/:id",component:Y}),Object(j.jsx)(d.b,{exact:!0,path:"/map",component:ce}),Object(j.jsx)(d.b,{exact:!0,path:"/profile",component:je}),Object(j.jsx)(d.b,{exact:!0,path:"*",component:D})]})}),Object(j.jsx)(f,{})]})}}]),a}(n.Component));pe.contextType=u;var fe=pe,ge=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,123)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),n(e),s(e),r(e),i(e)}))},Oe=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={user:null,isLoggedIn:!1,isLoading:!0},e.removeUser=function(){y.logout().then((function(){e.setState({user:null,isLoggedIn:!1})}))},e.setUser=function(t){e.setState({user:t,isLoggedIn:!0})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;y.isLoggedIn().then((function(t){e.setState({user:t,isLoggedIn:!0,isLoading:!1})})).catch((function(t){e.setState({isLoggedIn:!1,isLoading:!1})}))}},{key:"render",value:function(){var e={user:this.state.user,isLoggedIn:this.state.isLoggedIn,isLoading:this.state.isLoading,removeUser:this.removeUser,setUser:this.setUser};return Object(j.jsx)(u.Provider,{value:e,children:this.props.children})}}]),a}(s.a.Component);a(120),a(121);i.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(m.a,{children:Object(j.jsx)(Oe,{children:Object(j.jsx)(fe,{})})})}),document.getElementById("root")),ge()},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},63:function(e,t,a){},65:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){}},[[122,1,2]]]);
//# sourceMappingURL=main.ddae39b8.chunk.js.map