(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{117:function(e,t,a){},118:function(e,t,a){},119:function(e,t,a){},120:function(e,t,a){},121:function(e,t,a){},122:function(e,t,a){},123:function(e,t,a){},124:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),c=a(25),i=a.n(c),r=(a(62),a(2)),l=a(3),o=a(5),h=a(4),d=a(8),u=s.a.createContext(),m=a(6),b=a(31),j=a(0),p=function(e){return function(t){return Object(j.jsx)(u.Consumer,{children:function(a){return Object(j.jsx)(e,Object(b.a)(Object(b.a)({},t),{},{context:a}))}})}},f=(a(64),p((function(e){var t=e.context;return Object(j.jsxs)("nav",{className:"navbar",children:[t.isLoggedIn&&Object(j.jsxs)("ul",{className:"nav__list",children:[Object(j.jsx)("li",{children:Object(j.jsx)(m.c,{exact:!0,to:"/beer",className:"nav__link",children:Object(j.jsx)("div",{className:"midthin",children:"Beers"})})}),Object(j.jsx)("li",{children:Object(j.jsx)(m.c,{exact:!0,to:"/map",className:"nav__link middle",children:Object(j.jsx)("div",{className:"midthin",children:"Map"})})}),Object(j.jsx)("li",{children:Object(j.jsx)(m.c,{exact:!0,to:"/profile",className:"nav__link",children:Object(j.jsx)("div",{className:"midthin",children:"Profile"})})})]}),!t.isLoggedIn&&Object(j.jsxs)("ul",{className:"nav__list",children:[Object(j.jsx)("li",{children:Object(j.jsx)(m.c,{exact:!0,to:"/signin",className:"nav__link-half left",children:Object(j.jsx)("div",{children:"Sign In"})})}),Object(j.jsx)("li",{children:Object(j.jsx)(m.c,{exact:!0,to:"/signup",className:"nav__link-half",children:Object(j.jsx)("div",{children:"Sign Up"})})})]})]})}))),g=a(9),x=a(17),O=a.n(x),v=O.a.create({baseURL:"https://canned-project.herokuapp.com",withCredentials:!0});function _(e){if(e.response.data)throw console.log(e.response&&e.response.data),e;throw e}var w=function(e){return v.post("/api/auth/signup",e).then((function(e){return e.data})).catch(_)},y=function(e){return v.post("/api/auth/signin",e).then((function(e){return e.data})).catch(_)},S=function(){return v.get("/api/auth/isLoggedIn").then((function(e){return e.data})).catch(_)},N=function(){return v.get("/api/auth/logout").then((function(e){return e.data})).catch(_)},C=function(e){return v.get("/api/beer/find/?name=".concat(e)).then((function(e){return e.data})).catch(_)},k=function(e){return v.get("/api/brewery/find/?name=".concat(e)).then((function(e){return e.data})).catch(_)},R=function(){return v.get("/api/users/me").then((function(e){return e.data})).catch(_)},F=function(e){return v.patch("/api/users/edit/me",e).then((function(e){return e.data})).catch(_)},L=function(){return v.get("/api/users/me/reviews").then((function(e){return e.data})).catch(_)},D=function(){return v.get("/api/users/me/images").then((function(e){return e.data})).catch(_)},I=function(){return v.get("/api/users/me/beers").then((function(e){return e.data})).catch(_)},B=function(e){return v.patch("/api/users/me/beer/add/".concat(e)).then((function(e){return e.data})).catch(_)},A=function(e){return v.patch("/api/users/me/beer/remove/".concat(e)).then((function(e){return e.data})).catch(_)},T=function(){return v.delete("/api/users/me/delete").then((function(e){return e.data})).catch(_)},U=function(){return v.get("/api/beer").then((function(e){return e.data})).catch(_)},P=function(e){return v.get("/api/beer/".concat(e)).then((function(e){return e.data})).catch(_)},M=function(e){return v.post("/api/beer/add-beer",e).then((function(e){return e.data})).catch(_)},V=function(e,t){return v.patch("/api/beer/edit-beer/".concat(e),t).then((function(e){return e.data})).catch(_)},E=function(e){return v.get("/api/beer/reviews/".concat(e)).then((function(e){return e.data})).catch(_)},J=function(e){return v.get("/api/beer/images/".concat(e)).then((function(e){return e.data})).catch(_)},G=function(e){return v.delete("/api/beer/delete/".concat(e)).then((function(e){return e.data})).catch(_)},X=function(){return v.get("/api/brewery").then((function(e){return e.data})).catch(_)},z=function(e){return v.post("/api/brewery/add-brewery",e).then((function(e){return e.data})).catch(_)},W=function(e,t){return v.patch("/api/brewery/edit/".concat(e),t).then((function(e){return e.data})).catch(_)},Y=function(e){return v.get("/api/brewery/beers/".concat(e)).then((function(e){return e.data})).catch(_)},H=function(e){return v.post("/api/review/",e).then((function(e){return e.data})).catch(_)},K=function(e,t){return v.patch("/api/review/edit/".concat(e),t).then((function(e){return e.data})).catch(_)},q=function(e){return v.delete("/api/review/delete/".concat(e)).then((function(e){return e.data})).catch(_)},Q=function(e){return v.post("/api/image/",e).then((function(e){return e.data})).catch(_)},Z=function(e){return v.delete("/api/image/delete/".concat(e)).then((function(e){return e.data})).catch(_)},$=(a(88),function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={email:"",password:""},e.handleChange=function(t){var a=t.target.value,n=t.target.name;e.setState(Object(g.a)({},n,a))},e.handleSubmit=function(t){t.preventDefault(),y(e.state).then((function(t){e.context.setUser(t)})).catch((function(e){console.log(e)}))},e}return Object(l.a)(a,[{key:"render",value:function(){return this.context.isLoggedIn?(console.log("already signed in"),Object(j.jsx)(d.a,{to:"/"})):Object(j.jsxs)("section",{className:"auth__form-section",children:[Object(j.jsx)("header",{className:"flex-center auth__header",children:Object(j.jsx)("h1",{children:"Welcome back Can Fan"})}),Object(j.jsxs)("form",{autoComplete:"off",className:" flex-center auth__form",onSubmit:this.handleSubmit,children:[Object(j.jsx)("div",{className:"auth__form-group",children:Object(j.jsx)("input",{onChange:this.handleChange,value:this.state.email,className:"auth__input",id:"email",type:"email",name:"email",placeholder:"Email Address"})}),Object(j.jsx)("div",{className:"auth__form-group",children:Object(j.jsx)("input",{onChange:this.handleChange,value:this.state.password,className:"auth__input",id:"password",type:"password",name:"password",placeholder:"Password"})}),Object(j.jsx)("button",{className:"auth__btn",children:Object(j.jsx)("h2",{children:"Sign in"})})]})]})}}]),a}(n.Component));$.contextType=u;var ee=$,te=function(e){return Object(j.jsx)(ee,{})},ae=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={},e.handleChange=function(t){var a=t.target.value,n=t.target.name;e.setState(Object(g.a)({},n,a))},e.handleSubmit=function(t){t.preventDefault(),w(e.state).then((function(t){e.context.setUser(t)})).catch((function(e){console.log(e)}))},e}return Object(l.a)(a,[{key:"render",value:function(){return this.context.isLoggedIn?Object(j.jsx)(d.a,{to:"/"}):Object(j.jsxs)("section",{className:"auth__form-section",children:[Object(j.jsx)("header",{className:"flex-center auth__header",children:Object(j.jsx)("h1",{children:"Welcome to Canned!"})}),Object(j.jsxs)("form",{autoComplete:"off",className:"flex-center auth__form",onChange:this.handleChange,onSubmit:this.handleSubmit,children:[Object(j.jsx)("div",{className:"auth__form-group",children:Object(j.jsx)("input",{className:"auth__input",id:"userName",type:"text",name:"userName",placeholder:"User Name"})}),Object(j.jsx)("div",{className:"auth__form-group",children:Object(j.jsx)("input",{className:"auth__input",id:"email",type:"email",name:"email",placeholder:"Email Address"})}),Object(j.jsx)("div",{className:"auth__form-group",children:Object(j.jsx)("input",{className:"auth__input",id:"password",type:"password",name:"password",placeholder:"Password"})}),Object(j.jsx)("div",{className:"auth__form-group",children:Object(j.jsx)("input",{className:"auth__input",id:"city",type:"text",name:"city",placeholder:"Home City"})}),Object(j.jsx)("button",{className:"auth__btn",children:Object(j.jsx)("h2",{children:"Sign up"})})]})]})}}]),a}(n.Component);ae.contextType=u;var ne=ae,se=function(e){return Object(j.jsx)(ne,{})},ce=a(22),ie=(a(46),function(e){var t=Math.round(e.rating),a=t<1?"empty":"",n=t<2?"empty":"",s=t<3?"empty":"",c=t<4?"empty":"",i=t<5?"empty":"";return Object(j.jsxs)("div",{className:"star__box",children:[Object(j.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"}),Object(j.jsx)("span",{className:"fa fa-star ".concat(a)}),Object(j.jsx)("span",{className:"fa fa-star ".concat(n)}),Object(j.jsx)("span",{className:"fa fa-star ".concat(s)}),Object(j.jsx)("span",{className:"fa fa-star ".concat(c)}),Object(j.jsx)("span",{className:"fa fa-star ".concat(i)})]})}),re=function(e){var t=e.beerList;return console.log(e),Object(j.jsx)("div",{children:Object(j.jsx)("ul",{className:"beer__list",children:t.map((function(e){return Object(j.jsx)("li",{className:"beer__list-item flex-center",children:Object(j.jsx)(m.b,{exact:!0,to:"/beer-detail/".concat(e._id),children:Object(j.jsxs)("div",{className:"beer__box",children:[Object(j.jsx)("div",{className:"beer__image-box",children:Object(j.jsx)("img",{className:"beer__image",src:e.image,alt:e.name})}),Object(j.jsxs)("div",{className:"beer__info",children:[Object(j.jsx)("h3",{children:e.name}),Object(j.jsx)("h4",{children:e.breweryname}),Object(j.jsx)(ie,{rating:e.rating})]})]})})},e._id)}))})})},le=(a(47),function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={search:"",results:[],isLoading:!1},e.handleSearch=function(t){e.setState({search:t.target.value,isLoading:!0}),clearTimeout(e.timeoutId),e.timeoutId=setTimeout((function(){e.performSearch()}),1e3)},e.performSearch=function(){""!==e.state.search?C(e.state.search).then((function(t){e.setState({results:t,isLoading:!1})})):e.setState({results:[],isLoading:!1})},e}return Object(l.a)(a,[{key:"handleBeerClicked",value:function(e){this.setState({search:e.name,results:[]}),console.log(this.props),this.props.onSelect(e)}},{key:"render",value:function(){return Object(j.jsxs)("div",{className:"search__box",children:[Object(j.jsx)("h2",{className:"thin",children:"Search"}),Object(j.jsx)("input",{className:"search__bar",type:"text",value:this.state.search,onChange:this.handleSearch,name:"search",id:"search"}),Object(j.jsxs)("ul",{className:"search__results",children:[this.state.results.map((function(e){return Object(j.jsx)("li",{className:"search__list-item",children:Object(j.jsx)(m.b,{exact:!0,to:"/beer-detail/".concat(e._id),children:Object(j.jsxs)("h4",{className:"thin",children:[e.name," - ",e.breweryname]})})},e._id)})),this.state.isLoading&&Object(j.jsx)("li",{className:"search__list-item",children:"Beer hunting..."})]})]})}}]),a}(n.Component)),oe=(a(89),p(function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={beers:null,sendBeer:[],popUp:!1,rankedBeer:null,normList:!0},e.handleListNormal=function(){e.setState({normList:!0})},e.handleListRanked=function(){e.setState({normList:!1})},e.handleLogout=function(){var t=e.props.context;N().then((function(){t.removeUser(),e.props.history.push("/")})).catch((function(e){console.log(e)}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;U().then((function(t){var a=Object(ce.a)(t);a.sort((function(e,t){return t.releasedate-e.releasedate})),e.setState({beers:a}),t.sort((function(e,t){return t.rating-e.rating})),e.setState({rankedBeer:t})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){if(null===this.state.beers)return Object(j.jsx)("div",{children:"One sec, just heading to the bar..."});var e=this.state.normList?this.state.beers:this.state.rankedBeer;return Object(j.jsxs)("div",{className:"beer__main-list",children:[Object(j.jsx)(le,{}),Object(j.jsxs)("div",{className:"beer__list-type",children:[Object(j.jsx)("div",{onClick:this.handleListNormal,className:"".concat(this.state.normList?"":"active"," flex-center beer__list-switch"),children:Object(j.jsx)("h2",{className:"thin",children:"Latest"})}),Object(j.jsx)("div",{onClick:this.handleListRanked,className:"".concat(this.state.normList?"active":""," flex-center beer__list-switch"),children:Object(j.jsx)("h2",{className:"thin",children:"Top rated"})})]}),Object(j.jsx)(re,{beerList:e})]})}}]),a}(n.Component))),he=function(){return Object(j.jsx)("div",{children:Object(j.jsx)("div",{className:"lost",children:Object(j.jsx)("p",{children:"you seem a bit lost, let's get back to the beer!"})})})},de=a(11),ue=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={rating:0,starOne:"empty",starTwo:"empty",starThree:"empty",starFour:"empty",starFive:"empty"},e.handleOne=function(){e.setState({rating:1,starOne:"",starTwo:"empty",starThree:"empty",starFour:"empty",starFive:"empty"}),e.props.setRate(e.state.rating),console.log(e.state)},e.handleTwo=function(){e.setState({rating:2,starOne:"",starTwo:"",starThree:"empty",starFour:"empty",starFive:"empty"}),e.props.setRate(e.state.rating),console.log(e.state)},e.handleThree=function(){e.setState({rating:3,starOne:"",starTwo:"",starThree:"",starFour:"empty",starFive:"empty"}),e.props.setRate(e.state.rating),console.log(e.state)},e.handleFour=function(){e.setState({rating:4,starOne:"",starTwo:"",starThree:"",starFour:"",starFive:"empty"}),e.props.setRate(e.state.rating),console.log(e.state)},e.handleFive=function(){e.setState({rating:5,starOne:"",starTwo:"",starThree:"",starFour:"",starFive:""}),e.props.setRate(e.state.rating),console.log(e.state)},e}return Object(l.a)(a,[{key:"render",value:function(){return Object(j.jsx)("div",{children:Object(j.jsxs)("div",{className:"review__star__box",children:[Object(j.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"}),Object(j.jsx)("span",{onClick:this.handleOne,className:"fa fa-star ".concat(this.state.starOne)}),Object(j.jsx)("span",{onClick:this.handleTwo,className:"fa fa-star ".concat(this.state.starTwo)}),Object(j.jsx)("span",{onClick:this.handleThree,className:"fa fa-star ".concat(this.state.starThree)}),Object(j.jsx)("span",{onClick:this.handleFour,className:"fa fa-star ".concat(this.state.starFour)}),Object(j.jsx)("span",{onClick:this.handleFive,className:"fa fa-star ".concat(this.state.starFive)})]})})}}]),a}(n.Component),me=(a(90),s.a.forwardRef((function(e,t){return Object(j.jsxs)(s.a.Fragment,{children:[Object(j.jsx)("label",{className:"UploadWidget label",htmlFor:e.name,children:e.children}),Object(j.jsx)("input",{onChange:function(t){var a=t.target.files[0],n=URL.createObjectURL(a);e.onFileSelect&&e.onFileSelect(n)},ref:t,className:"UploadWidget input",id:e.name,name:e.name,type:"file"})]})}))),be=(a(28),p(function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).beerId=e.props.beerId,e.userId=e.props.context.user._id,e.beerName=e.props.beerName,e.state={beername:e.beerName,beerid:e.beerId,userid:e.userId},e.imageRef=s.a.createRef(),e.handleChange=function(t){var a=t.target.value,n=t.target.name;e.setState(Object(g.a)({},n,a)),console.log(e.state)},e.handleSubmit=function(t){t.preventDefault();var a=e.state,n=a.beername,s={beerid:a.beerid,beername:n,userid:a.userid,rating:a.rating,comment:a.comment},c=new FormData;for(var i in e.state)"image"!==i&&c.append(i,e.state[i]);var r,l=Object(de.a)(c.entries());try{for(l.s();!(r=l.n()).done;){var o=r.value;console.log(o[0]+", "+o[1])}}catch(h){l.e(h)}finally{l.f()}e.imageRef.current.files[0]&&c.append("image",e.imageRef.current.files[0]),H(s).then((function(e){console.log(e,"success")})).catch((function(e){console.log(e)})),e.imageRef.current.files[0]&&Q(c).then((function(e){console.log(e,"success")})).catch((function(e){return console.log(e)})),e.props.onComplete()},e.handleFileSelect=function(t){e.setState({tmpUrl:t})},e.handleAddStars=function(t){e.setState({rating:t})},e}return Object(l.a)(a,[{key:"render",value:function(){return console.log(this.state),Object(j.jsxs)("section",{className:"reivew__form-main",children:[Object(j.jsx)("header",{className:"header",children:Object(j.jsxs)("h3",{children:["Add a Review of ",this.props.beerName]})}),Object(j.jsxs)("form",{autoComplete:"off",className:"review__form",onSubmit:this.handleSubmit,children:[Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)(ue,{setRate:this.handleAddStars})}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("textarea",{className:"review__comment",id:"comment",type:"text",name:"comment",value:this.state.comment,placeholder:"Write your thoughts",onChange:this.handleChange})}),Object(j.jsxs)("div",{className:"newbeer__image-output",children:[Object(j.jsx)(me,{ref:this.imageRef,onFileSelect:this.handleFileSelect,name:"image",children:"Upload image"}),Object(j.jsx)("div",{className:"flex-center upload__image-box ",children:this.state.tmpUrl?Object(j.jsx)("img",{className:"upload__image",src:this.state.tmpUrl,alt:"beer"}):""})]}),Object(j.jsx)("button",{className:"btn-submit",children:"Review Can"})]})]})}}]),a}(n.Component))),je=(a(91),function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).images=e.props.imagesList,e.state={photos:e.images,number:0,photo:0,showPhoto:!1},e.handleNextPhoto=function(){var t=e.state.photos.length;e.setState({number:e.state.number+1});var a=Math.abs(e.state.number)%t;e.setState({photo:a}),console.log(e.state.photo,e.state.number)},e.handlePreviousPhoto=function(){var t=e.state.photos.length;e.setState({number:e.state.number-1});var a=Math.abs(e.state.number)%t;e.setState({photo:a}),console.log(e.state.photo,e.state.number)},e.handleShowPhoto=function(t){e.setState({showPhoto:!e.state.showPhoto,photoClicked:t})},e.handleShowPhoto=function(t){e.setState({showPhoto:!e.state.showPhoto,photoClicked:t})},e.handleDeleteImage=function(t){Z(t).then((function(t){console.log("success",t),e.props.history.push("/profile")})).catch((function(e){console.log(e)}))},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state.photos,a=this.state.photo;return this.state.images?Object(j.jsx)("div",{children:"loading images..."}):Object(j.jsxs)("div",{className:"flex-center",children:[this.state.showPhoto&&Object(j.jsxs)("div",{className:"flex-center image__large-box",children:[Object(j.jsx)("h2",{className:"thin",children:this.state.photoClicked.beername}),Object(j.jsx)("img",{className:"image__large-image",src:this.state.photoClicked.image,alt:""}),Object(j.jsx)("h5",{onClick:this.handleShowPhoto,children:"back"}),Object(j.jsx)("p",{className:"settings",onClick:this.handleDeleteImage,children:"delete this image?"})]}),0===this.state.photos.length?Object(j.jsx)("div",{children:Object(j.jsx)("h2",{children:"no photos to display"})}):Object(j.jsxs)("div",{className:"image__gallery-box ",children:[Object(j.jsx)("p",{onClick:this.handlePreviousPhoto,children:"<"}),Object(j.jsxs)("div",{className:"image__gallery-grid",children:[Object(j.jsx)("div",{className:"flex-center image__image-box",onClick:function(){e.handleShowPhoto(t[a])},children:Object(j.jsx)("img",{className:"image__gallery-photo",src:t[a].image,alt:a})}),Object(j.jsx)("div",{className:"flex-center image__image-box",onClick:function(){e.handleShowPhoto(t[a+1])},children:this.state.photos.length>1?Object(j.jsx)("img",{className:"image__gallery-photo",src:t[a+1].image,alt:a+1}):""}),Object(j.jsx)("div",{className:"flex-center image__image-box",onClick:function(){e.handleShowPhoto(t[a+2])},children:this.state.photos.length>2?Object(j.jsx)("img",{className:"image__gallery-photo",src:t[a+2].image,alt:a+2}):""})]}),Object(j.jsx)("p",{onClick:this.handleNextPhoto,children:">"})]})]})}}]),a}(n.Component)),pe=a(19),fe=function(e){var t,a=e.children,n=e.disabled,s=e.handleClick,c=Object(pe.a)(e,["children","disabled","handleClick"]),i={primary:"primary",secondary:"secondary"};for(var r in c)i[r]&&(t=i[r]);return Object(j.jsx)("button",{disabled:n,id:"Btn",className:"Btn btn-".concat(t||""),onClick:s,children:a})},ge=(a(92),function(e){var t=e.status,a=e.message;return Object(j.jsx)("div",{className:"FeedBack ".concat(t),children:Object(j.jsx)("p",{children:a})})}),xe=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={search:"",results:[],isLoading:!1},e.handleSearch=function(t){e.setState({search:t.target.value,isLoading:!0}),clearTimeout(e.timeoutId),e.timeoutId=setTimeout((function(){e.performSearch()}),1e3)},e.performSearch=function(){""!==e.state.search?k(e.state.search).then((function(t){e.setState({results:t,isLoading:!1})})):e.setState({results:[],isLoading:!1})},e}return Object(l.a)(a,[{key:"handleBreweryClicked",value:function(e){this.setState({search:e.name,results:[]}),console.log(this.props),this.props.onSelect(e)}},{key:"render",value:function(){var e=this;return Object(j.jsxs)("div",{className:"search__box",children:[Object(j.jsx)("h2",{className:"thin",children:"Search"}),Object(j.jsx)("input",{className:"search__bar",type:"text",value:this.state.search,onChange:this.handleSearch,name:"searchBrew",id:"searchBrew"}),Object(j.jsxs)("ul",{className:"search__results",children:[this.state.results.map((function(t){return Object(j.jsx)("li",{className:"search__list-item",onClick:function(){return e.handleBreweryClicked(t)},children:Object(j.jsx)("h4",{className:"thin",children:t.name})},t._id)})),this.state.isLoading&&Object(j.jsx)("li",{className:"search__list-item",children:"Brewery hunting..."})]})]})}}]),a}(n.Component);function Oe(e,t,a){if(!t||"object"!==typeof t||t instanceof Date||t instanceof File){var n=null==t?"":t;e.append(a,n)}else Object.keys(t).forEach((function(n){Oe(e,t[n],a?"".concat(a,"[").concat(n,"]"):n)}))}var ve=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={httpResponse:null},e.imageRef=s.a.createRef(),e.formRef=s.a.createRef(),e.handleChange=function(t){var a="file"===t.target.type?t.target.files[0]:t.target.value,n=t.target.name;e.setState(Object(g.a)({},n,a))},e.handleSubmit=function(t){t.preventDefault();var a=new FormData,n=e.state;n.httpRespons;Oe(a,Object(pe.a)(n,["httpRespons"])),V(e.props.beer._id,a).then((function(t){e.setState({httpResponse:{status:"success",message:"beer successfully updated."}}),e.timeoutId=setTimeout((function(){e.setState({httpResponse:null})}),2e3),e.props.handleChange(t),e.props.handleClose()})).catch((function(t){e.setState({httpResponse:{status:"failure",message:"Something bad happened while updating your beer, try again later"}}),e.timeoutId=setTimeout((function(){e.setState({httpResponse:null})}),2e3)}))},e.handleFileSelect=function(t,a){e.setState({image:a})},e.handleBrewerySelect=function(t){e.setState({breweryname:t.name,breweryid:t._id})},e.handleAddStars=function(t){e.setState({rating:t})},e.handleDeleteBeer=function(t){G(t).then((function(t){console.log("success",t),e.props.history.push("/beer")})).catch((function(e){console.log(e)}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setState({beer:this.props.beer,isLoading:!1})}},{key:"render",value:function(){var e=this;console.log(this.props);var t=this.state.httpResponse,a=this.props.beer,n=a.name,s=a.description,c=a.abv,i=a.breweryname,r=a.releasedate,l=(a.breweryid,a.rating,a.date,a._id);return Object(j.jsxs)("section",{className:"form-section",children:[Object(j.jsxs)("form",{autoComplete:"off",className:"form",onSubmit:this.handleSubmit,children:[Object(j.jsxs)("h1",{className:"header",children:["Edit this can ",Object(j.jsx)("span",{onClick:this.props.handleClose,children:"X"})]}),Object(j.jsx)("div",{className:"round-image widget-image",children:Object(j.jsx)("img",{src:this.state.tmpUrl||this.props.beer.image,alt:n})}),Object(j.jsx)("div",{className:"form-group-uploadwidget",children:Object(j.jsx)(me,{onFileSelect:this.handleFileSelect,name:"image",children:"Change image"})}),t&&Object(j.jsx)(ge,{message:t.message,status:t.status}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("input",{className:"input",id:"name",type:"text",name:"name",onChange:this.handleChange,defaultValue:n})}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("textarea",{className:"input",id:"description",type:"text",name:"description",defaultValue:s})}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)(ue,{setRate:this.handleAddStars})}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsxs)("h2",{children:["Current brewery: ",i]}),Object(j.jsx)(xe,{onSelect:this.handleBrewerySelect})]}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("input",{className:"form__input",onChange:this.handleChange,defaultValue:c,type:"number",name:"abv",id:"abv"})}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("input",{className:"input",id:"releasedate",type:"number",name:"releasedate",onChange:this.handleChange,defaultValue:r})}),Object(j.jsx)(fe,{primary:!0,children:"Save"})]}),Object(j.jsxs)("h3",{children:["Or, if you're sure... ",Object(j.jsx)("b",{onClick:function(){return e.handleDeleteBeer(l)},children:"delete"})," this beer"]})]})}}]),a}(n.Component);ve.contextType=u;var _e=Object(d.g)(ve),we=(a(93),p(function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).beerId=e.props.match.params.id,e.state={user:null,beer:null,userBeers:null,alreadyDrunk:!1,reviewForm:!1,imageForm:!1,beerImages:null,beerReviews:null,showSettings:!1},e.handleAddBeer=function(){B(e.beerId).then((function(t){console.log("success"),e.setState({alreadyDrunk:!e.state.alreadyDrunk})})).catch((function(e){return console.log(e)}))},e.handleRemoveBeer=function(){A(e.beerId).then((function(t){console.log("success"),e.setState({alreadyDrunk:!e.state.alreadyDrunk,reviewForm:!1,imageForm:!1})})).catch((function(e){return console.log(e)}))},e.handleShowReview=function(){console.log("click"),e.setState({reviewForm:!e.state.reviewForm})},e.handleShowImage=function(){e.setState({imageForm:!e.state.imageForm})},e.handleShowSettings=function(){e.setState({showSettings:!e.state.showSettings})},e.handleBeerChange=function(t){e.setState({beer:t})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.context.user;this.setState({user:t,userBeers:t.beers}),P(this.beerId).then((function(t){void 0===t.name&&e.props.history.push("/*"),e.setState({beer:t})})).catch((function(e){console.log(e)})),t.beers.includes(this.beerId)&&this.setState({alreadyDrunk:!0}),J(this.beerId).then((function(t){t.length>0?e.setState({beerImages:t}):e.setState({beerImages:[]})})).catch((function(e){console.log(e)})),E(this.beerId).then((function(t){t.length>0?e.setState({beerReviews:t}):e.setState({beerReviews:[]})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){if(null===this.state.user)return Object(j.jsx)("div",{children:"One sec, just heading to the bar..."});if(null===this.state.beer)return Object(j.jsx)("div",{children:"One sec, just heading to the bar..."});if(null===this.state.beerImages)return Object(j.jsx)("div",{children:"One sec, just heading to the bar..."});if(null===this.state.beerReviews)return Object(j.jsx)("div",{children:"One sec, just heading to the bar..."});var e=this.state.beer;return Object(j.jsxs)("div",{className:"details__main",children:[Object(j.jsxs)("div",{className:"details__link-bar",children:[this.state.alreadyDrunk?Object(j.jsxs)("div",{className:"flex-center",children:[Object(j.jsx)("h3",{className:"flex-center midthin canned",children:"Canned!"}),Object(j.jsxs)("div",{className:"details__canned-options",children:[Object(j.jsx)("h3",{className:"".concat(this.state.reviewForm&&"active"," flex-center details__link-bar-links"),onClick:this.handleShowReview,children:"Review"}),Object(j.jsx)("h3",{className:"flex-center details__link-bar-links",onClick:this.handleRemoveBeer,children:"un-Can?"})]})]}):Object(j.jsx)("h3",{className:"flex-center midthin canned",onClick:this.handleAddBeer,children:"+ Can it!"}),this.state.reviewForm&&Object(j.jsx)(be,{beerName:e.name,beerId:this.beerId,onComplete:this.handleShowReview})]}),Object(j.jsxs)("div",{className:"details__box overflow ".concat(this.state.alreadyDrunk&&"can-move"),children:[Object(j.jsxs)("div",{className:"details__top-box",children:[Object(j.jsx)("div",{className:"flex-center details__image-box",children:Object(j.jsx)("img",{className:"details__image",src:e.image,alt:"beer"})}),Object(j.jsxs)("div",{className:"details__info-box",children:[Object(j.jsx)("h1",{className:"beername",children:e.name}),Object(j.jsx)("h4",{children:e.breweryname}),Object(j.jsx)("div",{className:"details__rating",children:Object(j.jsx)(ie,{rating:e.rating})}),Object(j.jsxs)("p",{children:[e.abv,"% ABV"]}),Object(j.jsx)("h4",{className:"settings",onClick:this.handleShowSettings,children:"settings"})]}),this.state.showSettings&&Object(j.jsx)("div",{className:"overflow settings-box",children:Object(j.jsx)(_e,{beer:this.state.beer,handleChange:this.handleBeerChange,handleClose:this.handleShowSettings})})]}),Object(j.jsx)("div",{className:"details__description",children:Object(j.jsx)("p",{children:e.description})}),Object(j.jsx)("h3",{className:"comments midthin flex-center",children:"Images"}),Object(j.jsx)("div",{className:"details__image-scroll",children:this.state.beerImages.length>0?Object(j.jsx)(je,{imagesList:this.state.beerImages}):Object(j.jsx)("h1",{children:"The beer has no Can snaps yet!"})}),Object(j.jsx)("h3",{className:"comments midthin flex-center",children:"Comments"}),Object(j.jsx)("ul",{children:this.state.beerReviews.map((function(e){return Object(j.jsxs)("li",{className:"beer__list-item flex-center",children:[Object(j.jsx)(ie,{rating:e.rating}),Object(j.jsx)("p",{children:e.comment})]})}))})]})]})}}]),a}(n.Component))),ye=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={beers:null,sendBeer:[],popUp:!1},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;I().then((function(t){e.setState({beers:t})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return null===this.state.beers?Object(j.jsx)("div",{children:"One sec, just heading to the bar..."}):Object(j.jsx)("div",{className:"beer__main-list",children:Object(j.jsx)("ul",{className:"beer__list",children:this.state.beers.map((function(e){return Object(j.jsx)("li",{className:"beer__list-item",children:Object(j.jsxs)("div",{className:"beer__box",children:[Object(j.jsx)("div",{className:"beer__image-box",children:Object(j.jsx)("img",{className:"beer__image",src:e.image,alt:e.name})}),Object(j.jsxs)("div",{className:"beer__info",children:[Object(j.jsx)(m.b,{exact:!0,to:"/beer-detail/".concat(e._id),children:Object(j.jsx)("h3",{children:e.name})}),Object(j.jsx)("h4",{children:e.breweryname}),Object(j.jsx)(ie,{rating:e.rating})]})]})},e._id)}))})})}}]),a}(n.Component),Se=(a(94),function(){return Object(j.jsx)("div",{className:"home__main",children:Object(j.jsx)("h1",{className:"home__title",children:"Canned!"})})}),Ne=a(36),Ce=(a(115),a(7)),ke=a.n(Ce);a(56);ke.a.workerClass=a(116).default;var Re=Object(Ne.b)({accessToken:"pk.eyJ1Ijoicm10d2lsbGlhbXMiLCJhIjoiY2ttbThvcXNwMGRyazJ3bGVwdG9sbnRzcSJ9.0R-H-K5vBBYCOD9m6cCxXw"}),Fe=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={breweries:null,longitude:null,latitude:null,breweryClicked:null,showDetails:!1,showName:!1},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setState({breweries:this.props.breweryList,longitude:this.props.longitude,latitude:this.props.latitude})}},{key:"componentDidUpdate",value:function(){this.setState({longitude:this.props.longitude,latitude:this.props.latitude})}},{key:"render",value:function(){var e=this;return null===this.state.breweries||null===this.state.longitude||null===this.state.latitude?Object(j.jsx)("div",{children:" loading map... "}):Object(j.jsx)("div",{className:"map__main",children:Object(j.jsx)(Re,{style:"mapbox://styles/mapbox/streets-v10",zoom:[11],containerStyle:{top:"8.2vh",left:0,bottom:0,right:0,position:"absolute"},center:[this.state.longitude,this.state.latitude],children:this.state.breweries.map((function(t){return Object(j.jsx)(Ne.a,{coordinates:[t.longitude,t.latitude],anchor:"bottom",onClick:function(){return e.props.markerClick(t)},children:Object(j.jsx)("img",{className:"map-marker",src:"https://res.cloudinary.com/dahzswwzk/image/upload/v1617034208/Basic_UI_Icon_Pack_-_Flat_map_pointer-512_d9c33w.webp",alt:"marker"})},t._id)}))})})}}]),a}(s.a.PureComponent),Le=(a(117),function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={search:"",results:[],isLoading:!1},e.handleSearchChange=function(t){e.setState({search:t.target.value,isLoading:!0}),clearTimeout(e.timeoutId),e.timeoutId=setTimeout((function(){e.performSearch()}),1e3)},e.performSearch=function(){""!==e.state.search?O.a.get("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(e.state.search,".json?access_token=pk.eyJ1Ijoicm10d2lsbGlhbXMiLCJhIjoiY2ttbThvcXNwMGRyazJ3bGVwdG9sbnRzcSJ9.0R-H-K5vBBYCOD9m6cCxXw")).then((function(t){e.setState({results:t.data.features,isLoading:!1})})):e.setState({results:[],isLoading:!1})},e.handleItemClicked=function(t){e.setState({search:t.place_name,results:[]}),e.props.onSelect(t)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.results,n=t.isLoading;return Object(j.jsxs)("div",{className:"AutocompletePlace",children:[Object(j.jsx)("input",{className:"Autocomplete__input",type:"text",value:this.props.defaultValue||this.state.search,onChange:this.handleSearchChange,placeholder:"Type an address"}),Object(j.jsxs)("ul",{className:"AutocompletePlace-results overflow",children:[a.map((function(t){return Object(j.jsx)("li",{className:"AutocompletePlace-items",onClick:function(){return e.handleItemClicked(t)},children:t.place_name},t.id)})),n&&Object(j.jsx)("li",{className:"AutocompletePlace-items",children:"Loading..."})]})]})}}]),a}(n.Component)),De=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={selectedBeer:null,rating:null,name:null,description:null,website:null,establisheddate:null,address:null,latitude:null,longitude:null},e.imageRef=s.a.createRef(),e.handleChange=function(t){var a=t.target.value,n=t.target.name;e.setState(Object(g.a)({},n,a))},e.handleOnSubmit=function(t){t.preventDefault();var a=new FormData;for(var n in e.state)"image"!==n&&a.append(n,e.state[n]);var s,c=Object(de.a)(a.entries());try{for(c.s();!(s=c.n()).done;){var i=s.value;console.log(i[0]+", "+i[1])}}catch(r){c.e(r)}finally{c.f()}e.imageRef.current.files[0]&&a.append("image",e.imageRef.current.files[0]),z(a).then((function(t){console.log("success",t),e.setState({rating:null,name:null,description:null,website:null,establisheddate:2021,address:null,latitude:null,longitude:null})})).catch((function(e){console.log(e)}))},e.handleFileSelect=function(t){e.setState({tmpUrl:t})},e.handleAddressSelect=function(t){console.log(t),e.setState({address:t.place_name,longitude:t.geometry.coordinates[0],latitude:t.geometry.coordinates[1]})},e.handleAddStars=function(t){e.setState({rating:t})},e}return Object(l.a)(a,[{key:"render",value:function(){return Object(j.jsx)("div",{className:"brewery__form-main",children:Object(j.jsxs)("form",{className:"brewery__form",onSubmit:this.handleOnSubmit,children:[Object(j.jsx)("label",{className:"form__label",htmlFor:"name",children:"Name"}),Object(j.jsx)("input",{className:"form__input",onChange:this.handleChange,value:this.state.name,type:"text",name:"name",id:"name"}),Object(j.jsx)("label",{className:"form__label",htmlFor:"description",children:"Description"}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("textarea",{className:"brewery__description",id:"description",type:"text",name:"description",value:this.state.comment,placeholder:"Describe this home of beer",onChange:this.handleChange})}),Object(j.jsx)("label",{className:"form__label",htmlFor:"name",children:"Website"}),Object(j.jsx)("input",{className:"form__input",onChange:this.handleChange,value:this.state.website,type:"text",name:"website",id:"website"}),Object(j.jsx)("label",{className:"form__label",htmlFor:"year",children:"Brewery established in"}),Object(j.jsx)("input",{className:"form__input-small",onChange:this.handleChange,value:this.state.establisheddate,type:"number",name:"establisheddate",id:"establisheddate"}),Object(j.jsx)("label",{className:"form__label",htmlFor:"rating",children:"Star rating"}),Object(j.jsx)(ue,{setRate:this.handleAddStars}),Object(j.jsx)("label",{className:"form__label",htmlFor:"address",children:"Address search"}),Object(j.jsx)(Le,{onSelect:this.handleAddressSelect}),Object(j.jsxs)("div",{className:"newbeer__image-output",children:[Object(j.jsx)(me,{ref:this.imageRef,onFileSelect:this.handleFileSelect,name:"image",children:"Upload image"}),Object(j.jsx)("div",{className:"flex-center",children:this.state.tmpUrl?Object(j.jsx)("img",{className:"upload__image",src:this.state.tmpUrl,alt:"beer"}):""})]}),Object(j.jsx)("button",{className:"btn-submit",children:"ADD"})]})})}}]),a}(n.Component);De.contextType=u;var Ie=De,Be=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={httpResponse:null},e.imageRef=s.a.createRef(),e.formRef=s.a.createRef(),e.handleChange=function(t){var a="file"===t.target.type?t.target.files[0]:t.target.value,n=t.target.name;e.setState(Object(g.a)({},n,a))},e.handleSubmit=function(t){t.preventDefault();var a=new FormData,n=e.state;n.httpRespons;Oe(a,Object(pe.a)(n,["httpRespons"])),W(e.props.brewery._id,a).then((function(t){e.setState({httpResponse:{status:"success",message:"beer successfully updated."}}),e.timeoutId=setTimeout((function(){e.setState({httpResponse:null})}),2e3),e.props.handleChange(t),e.props.handleClose()})).catch((function(t){e.setState({httpResponse:{status:"failure",message:"Something bad happened while updating your beer, try again later"}}),e.timeoutId=setTimeout((function(){e.setState({httpResponse:null})}),2e3)}))},e.handleFileSelect=function(t,a){e.setState({image:a})},e.handleAddressSelect=function(t){e.setState({address:t.place_name,longitude:t.geometry.coordinates[0],latitude:t.geometry.coordinates[1]})},e.handleAddStars=function(t){e.setState({rating:t})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setState({brewery:this.props.brewery,isLoading:!1})}},{key:"render",value:function(){var e=this.state.httpResponse,t=this.props.brewery,a=t.name,n=t.description,s=t.website,c=(t.breweryname,t.establisheddate),i=t.address;t.latitude,t.longitude,t.rating,t._id;return Object(j.jsx)("section",{className:"form-section",children:Object(j.jsxs)("form",{autoComplete:"off",className:"form",onSubmit:this.handleSubmit,children:[Object(j.jsxs)("h1",{className:"header",children:["Edit this brewery ",Object(j.jsx)("span",{onClick:this.props.handleClose,children:"X"})]}),Object(j.jsx)("div",{className:"round-image widget-image",children:Object(j.jsx)("img",{src:this.state.tmpUrl||this.props.brewery.image,alt:a})}),Object(j.jsx)("div",{className:"form-group-uploadwidget",children:Object(j.jsx)(me,{onFileSelect:this.handleFileSelect,name:"image",children:"Change image"})}),e&&Object(j.jsx)(ge,{message:e.message,status:e.status}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("input",{className:"input",id:"name",type:"text",name:"name",onChange:this.handleChange,defaultValue:a})}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("textarea",{className:"input",id:"description",type:"text",name:"description",defaultValue:n})}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)(ue,{setRate:this.handleAddStars})}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsxs)("h2",{children:["Current brewery address: ",i]}),Object(j.jsx)(Le,{onSelect:this.handleAddressSelect})]}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("input",{className:"form__input",onChange:this.handleChange,defaultValue:s,type:"text",name:"website",id:"website"})}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("input",{className:"input",id:"establisheddate",type:"number",name:"establisheddate",onChange:this.handleChange,defaultValue:c})}),Object(j.jsx)(fe,{primary:!0,children:"Save"})]})})}}]),a}(n.Component);Be.contextType=u;var Ae=Object(d.g)(Be),Te=(a(118),function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={brewery:null,breweryBeers:null,beerList:!1,showSettings:!1},e.handleAddBeer=function(){B(e.beerId).then((function(t){console.log("success"),e.setState({alreadyDrunk:!e.state.alreadyDrunk})})).catch((function(e){return console.log(e)}))},e.handleRemoveBeer=function(){A(e.beerId).then((function(t){console.log("success"),e.setState({alreadyDrunk:!e.state.alreadyDrunk,reviewForm:!1,imageForm:!1})})).catch((function(e){return console.log(e)}))},e.handleBeerList=function(){e.setState({beerList:!0})},e.handleDescription=function(){e.setState({beerList:!1})},e.handleShowSettings=function(){e.setState({showSettings:!e.state.showSettings})},e.handleBreweryChange=function(t){e.setState({brewery:t})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({brewery:this.props.brewery});var t=this.props.brewery._id;Y(t).then((function(t){console.log(t),e.setState({breweryBeers:t})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){if(null===this.state.brewery)return Object(j.jsx)("div",{children:"One sec, just heading to the bar..."});if(null===this.state.breweryBeers)return Object(j.jsx)("div",{children:"One sec, just heading to the bar..."});var e=this.state.brewery;return Object(j.jsx)("div",{className:"brewDetails__main",children:Object(j.jsxs)("div",{className:"brewDetails__box",children:[Object(j.jsxs)("div",{className:"brewDetails__top-box",children:[Object(j.jsx)("div",{className:"brewDetails__image-box",children:Object(j.jsx)("img",{className:"brewDetails__image",src:e.image,alt:"brewery"})}),Object(j.jsxs)("div",{className:"brewDetails__info-box",children:[Object(j.jsx)("h1",{className:"beername",children:e.name}),Object(j.jsxs)("h5",{children:["Established in ",e.establisheddate]}),Object(j.jsx)("div",{className:"details__rating",children:Object(j.jsx)(ie,{rating:e.rating})}),Object(j.jsxs)("p",{children:[" ",Object(j.jsx)("a",{target:"_blank",href:e.website,children:e.website})]}),Object(j.jsx)("p",{className:"settings",children:e.address}),Object(j.jsx)("h4",{className:"settings",onClick:this.handleShowSettings,children:"settings"})]})]}),this.state.showSettings&&Object(j.jsx)("div",{className:"overflow settings-box",children:Object(j.jsx)(Ae,{brewery:this.state.brewery,handleChange:this.handlebreweryChange,handleClose:this.handleShowSettings})}),Object(j.jsxs)("div",{className:"details__canned-options",children:[Object(j.jsx)("div",{onClick:this.handleDescription,className:"".concat(this.state.beerList&&"active"," flex-center details__link-bar-links"),children:Object(j.jsx)("h2",{children:"Details"})}),Object(j.jsx)("div",{onClick:this.handleBeerList,className:"".concat(this.state.beerList||"active"," flex-center details__link-bar-links"),children:Object(j.jsx)("h2",{children:"Beers"})})]}),Object(j.jsx)("div",{className:"brewDetails__bottom-box overflow",children:this.state.beerList?Object(j.jsx)("div",{children:Object(j.jsx)(re,{beerList:this.state.breweryBeers})}):Object(j.jsx)("div",{className:"details__description",children:Object(j.jsx)("p",{children:e.description})})}),Object(j.jsx)("div",{onClick:this.props.closePopUp,children:Object(j.jsx)("h2",{className:"thin back-to",children:"back to map"})})]})})}}]),a}(n.Component)),Ue=p(function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).userCity=e.props.context.user.city,e.state={breweries:null,selectedBrewery:null,userCity:e.userCity,longitude:null,latitude:null,showForm:!1,showDetails:!1,showName:!1},e.handleShowDetails=function(){e.setState({showDetails:!e.state.showDetails,showName:!1})},e.handleBrewerySelect=function(t){e.setState({breweryClicked:t,longitude:t.longitude,latitude:t.latitude,showName:!0})},e.handleMarkerClick=function(t){console.log(t),e.setState({longitude:t.longitude,latitude:t.latitude,breweryClicked:t,showName:!0})},e.handleShowForm=function(){e.setState({showForm:!e.state.showForm,showName:!1})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;X().then((function(t){e.setState({breweries:t})})).catch((function(e){return console.log(e)})),O.a.get("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(this.state.userCity,".json?access_token=").concat("pk.eyJ1Ijoicm10d2lsbGlhbXMiLCJhIjoiY2ttbThvcXNwMGRyazJ3bGVwdG9sbnRzcSJ9.0R-H-K5vBBYCOD9m6cCxXw")).then((function(t){var a=t.data.features[0];console.log(a),e.setState({longitude:a.geometry.coordinates[0],latitude:a.geometry.coordinates[1]})}))}},{key:"render",value:function(){return null===this.state.breweries||null===this.state.userCity||null===this.state.longitude||null===this.state.latitude?Object(j.jsx)("div",{children:"fetching your brewery map"}):(console.log(this.state),Object(j.jsxs)("div",{children:[this.state.showForm&&Object(j.jsx)("div",{className:"map__brewery-form",children:Object(j.jsx)(Ie,{})}),this.state.showName&&Object(j.jsx)("div",{onClick:this.handleShowDetails,className:"flex-center map__showname-box",children:Object(j.jsx)("h3",{children:this.state.breweryClicked.name})}),this.state.showDetails&&Object(j.jsx)("div",{className:"map__show-details-box",children:Object(j.jsx)(Te,{closePopUp:this.handleShowDetails,brewery:this.state.breweryClicked})}),Object(j.jsxs)("div",{className:"map__search-box",children:[Object(j.jsx)(xe,{onSelect:this.handleBrewerySelect}),Object(j.jsx)("h4",{className:"showform",onClick:this.handleShowForm,children:"Can't find your brewery? Add it here"})]}),Object(j.jsx)("div",{className:"map__map-container",children:Object(j.jsx)(Fe,{markerClick:this.handleMarkerClick,breweryList:this.state.breweries,longitude:this.state.longitude,latitude:this.state.latitude})})]}))}}]),a}(n.Component)),Pe=(a(119),function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={showSearch:!1,showForm:!1,selectedBeer:null,rating:null,name:"",description:"",abv:0,breweryname:"",breweryid:null,releasedate:2021},e.imageRef=s.a.createRef(),e.handleChange=function(t){var a=t.target.value,n=t.target.name;e.setState(Object(g.a)({},n,a))},e.handleFormClick=function(){e.setState({showForm:!e.state.showForm})},e.handleSearchClick=function(){e.setState({showSearch:!e.state.showSearch}),e.state.showForm&&e.setState({showForm:!1})},e.handleOnSubmit=function(t){t.preventDefault();var a=new FormData;for(var n in e.state)"image"!==n&&a.append(n,e.state[n]);var s,c=Object(de.a)(a.entries());try{for(c.s();!(s=c.n()).done;){var i=s.value;console.log(i[0]+", "+i[1])}}catch(r){c.e(r)}finally{c.f()}e.imageRef.current.files[0]&&a.append("image",e.imageRef.current.files[0]),M(a).then((function(t){console.log("success",t),B(t._id).then((function(e){console.log("success",e)})).catch((function(e){console.log(e)})),e.setState({rating:null,name:"",description:"",abv:0,breweryname:"",breweryid:null,releasedate:2021})})).catch((function(e){console.log(e)}))},e.handleFileSelect=function(t){e.setState({tmpUrl:t})},e.handleBeerSelect=function(t){e.setState({selectedBeer:t,showSearch:!1,showForm:!1}),B(t._id).then((function(e){console.log("success",e)})).catch((function(e){console.log(e)}))},e.handleBrewerySelect=function(t){e.setState({breweryname:t.name,breweryid:t._id})},e.handleAddStars=function(t){e.setState({rating:t})},e}return Object(l.a)(a,[{key:"render",value:function(){return console.log(this.state),Object(j.jsxs)("div",{className:"newbeer__main",children:[Object(j.jsx)("div",{className:"newbeer__link flex-center",children:Object(j.jsxs)("h1",{className:"",onClick:this.handleSearchClick,children:[" ",this.state.showSearch?"-":"+"," Add Beer"]})}),Object(j.jsx)("div",{children:this.state.showSearch&&Object(j.jsxs)("div",{className:"newbeer__search flex-center",children:[Object(j.jsx)(le,{onSelect:this.handleBeerSelect}),Object(j.jsxs)("h4",{onClick:this.handleFormClick,children:[this.state.showForm?"-":"+"," can't find it? Let's add it to the Canniverse"]})]})}),this.state.showForm&&Object(j.jsxs)("form",{className:"form newbeer__activeform",onSubmit:this.handleOnSubmit,children:[Object(j.jsx)("label",{className:"form__label",htmlFor:"name",children:"Name"}),Object(j.jsx)("input",{className:"form__input",onChange:this.handleChange,value:this.state.name,type:"text",name:"name",id:"name"}),Object(j.jsx)("label",{className:"form__label",htmlFor:"description",children:"Description"}),Object(j.jsx)("textarea",{className:"form__input",onChange:this.handleChange,value:this.state.description,type:"text",name:"description",id:"description"}),Object(j.jsxs)("div",{className:"newbeer__small-details",children:[Object(j.jsx)("label",{className:"abv__label",htmlFor:"abv",children:"ABV"}),Object(j.jsx)("input",{className:"form__input",onChange:this.handleChange,value:this.state.abv,type:"number",name:"abv",id:"abv"}),Object(j.jsx)("label",{className:"year__label",htmlFor:"year",children:"Release date"}),Object(j.jsx)("input",{className:"form__input",onChange:this.handleChange,value:this.state.releasedate,type:"number",name:"releasedate",id:"releasedate"}),Object(j.jsx)(ue,{setRate:this.handleAddStars})]}),Object(j.jsx)(xe,{onSelect:this.handleBrewerySelect}),Object(j.jsxs)("div",{className:"newbeer__image-output",children:[Object(j.jsx)(me,{ref:this.imageRef,onFileSelect:this.handleFileSelect,name:"image",children:"Upload image"}),Object(j.jsx)("div",{className:"newbeer__image",children:this.state.tmpUrl?Object(j.jsx)("img",{src:this.state.tmpUrl,alt:"beer"}):""})]}),Object(j.jsx)("button",{className:"form__button",children:"ADD NEW"})]})]})}}]),a}(n.Component));Pe.contextType=u;var Me=Pe,Ve=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={userName:null,email:null,city:null,tmpUrl:"",httpResponse:null,isLoading:!0},e.imageRef=s.a.createRef(),e.handleChange=function(t){var a=t.target.name,n=t.target.value;e.setState(Object(g.a)({},a,n))},e.isValidInput=function(t){return""!==e.state[t]},e.checkError=function(){for(var t in e.state)if(""===e.state[t])return!0;return!1},e.handleSubmit=function(t){t.preventDefault();var a=new FormData;for(var n in e.state)a.append(n,e.state[n]);F(a).then((function(){R().then((function(t){e.context.setUser(t)})),e.setState({httpResponse:{status:"success",message:"Profile successfully updated."}}),e.timeoutId=setTimeout((function(){e.setState({httpResponse:null})}),2e3)})).catch((function(t){e.setState({httpResponse:{status:"failure",message:"Something bad happened while updating your profile, try again later"}}),e.timeoutId=setTimeout((function(){e.setState({httpResponse:null})}),2e3)}))},e.handleDeleteUser=function(){T().then((function(t){console.log("success",t),e.props.history.push("/")})).catch((function(e){console.log(e)}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;R().then((function(t){e.setState({userName:t.userName,email:t.email,city:t.city,isLoading:!1})})).catch((function(t){e.setState({isLoading:!1,httpResponse:{status:"failure",message:"Something bad happened, please try again later"}})}))}},{key:"render",value:function(){var e=this.state.httpResponse;return this.state.isLoading?Object(j.jsx)("div",{children:"Loading..."}):(console.log(),Object(j.jsx)("section",{className:"form-section",children:Object(j.jsxs)("form",{autoComplete:"off",className:"form",onSubmit:this.handleSubmit,children:[Object(j.jsx)("h1",{className:"header",children:"Edit your profile"}),e&&Object(j.jsx)(ge,{message:e.message,status:e.status}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("input",{className:"input",id:"userName",type:"text",name:"userName",onChange:this.handleChange,value:this.state.userName}),!this.isValidInput("userName")&&Object(j.jsx)("p",{className:"input-error",children:"Invalid input"})]}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("input",{className:"input",id:"email",type:"email",name:"email",value:this.state.email,disabled:!0})}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("input",{className:"input",id:"city",type:"text",name:"city",onChange:this.handleChange,value:this.state.city}),!this.isValidInput("city")&&Object(j.jsx)("p",{className:"input-error",children:"Invalid input"})]}),Object(j.jsx)(fe,{primary:!0,children:"Save"})]})}))}}]),a}(n.Component);Ve.contextType=u;var Ee=Object(d.g)(Ve),Je=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={},e.handleChange=function(t){var a=t.target.value,n=t.target.name;e.setState(Object(g.a)({},n,a))},e.handleSubmit=function(t){t.preventDefault();var a=e.state,n={userid:a.userid,beerid:a.beerid,beername:a.beername,breweryid:a.breweryid,rating:a.rating,comment:a.comment};console.log(n),K(e.props.review._id,n).then((function(t){console.log("success",t),e.props.handleClose()})).catch((function(e){console.log(e)}))},e.handleAddStars=function(t){e.setState({rating:t})},e.handleDeleteBeer=function(t){q(t).then((function(t){console.log("success",t),e.props.handleClose(),e.props.history.push("/profile")})).catch((function(e){console.log(e)}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.review;this.setState({userid:e.userid,beerid:e.beerid,beername:e.beername,breweryid:e.breweryid,rating:e.rating,comment:e.comment})}},{key:"render",value:function(){var e=this;return Object(j.jsxs)("section",{className:"reivew__form-main",children:[Object(j.jsxs)("form",{autoComplete:"off",className:"reivew__form",onSubmit:this.handleSubmit,children:[Object(j.jsxs)("h1",{className:"header",children:["Edit your review ",Object(j.jsx)("span",{onClick:this.props.handleClose,children:"X"})]}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("textarea",{className:"input",id:"comment",type:"text",name:"comment",onChange:this.handleChange,defaultValue:this.state.comment})}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)(ue,{setRate:this.handleAddStars})}),Object(j.jsx)(fe,{primary:!0,children:"Save"})]}),Object(j.jsxs)("h3",{children:["Or, if you're sure... ",Object(j.jsx)("b",{onClick:function(){return e.handleDeleteReview(e.props.review._id)},children:"delete"})," this review"]})]})}}]),a}(n.Component);Je.contextType=u;var Ge=Object(d.g)(Je),Xe=(a(120),p(function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={user:null,beers:null,images:null,reviews:null,beerCount:null,reviewCLicked:null,showSettings:!1,reviewEdit:!1,imageBox:!1},e.handleShowPhoto=function(){e.setState({imageBox:!e.state.imageBox})},e.handleNextPhoto=function(){e.setState({imageNumber:e.state.imageNumber+1})},e.handlePreviousPhoto=function(){e.setState({imageNumber:e.state.imageNumber-1})},e.handleReviewClicked=function(t){e.setState({reviewCLicked:t,reviewEdit:!0})},e.handleReviewClose=function(){e.setState({reviewEdit:!1})},e.handleShowSettings=function(){e.setState({showSettings:!e.state.showSettings})},e.handleLogout=function(){var t=e.props.context;N().then((function(){t.removeUser(),e.props.history.push("/")})).catch((function(e){console.log(e)}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.context.user;this.setState({user:t}),I().then((function(t){e.setState({beers:t,beerCount:t.length})})).catch((function(e){return console.log(e)})),L().then((function(t){var a=Object(ce.a)(t);a.sort((function(e,t){return t.updated_at-e.updated_at})),e.setState({reviews:a})})).catch((function(e){return console.log(e)})),D().then((function(t){var a=Object(ce.a)(t);a.sort((function(e,t){return t.updated_at-e.updated_at})),e.setState({images:a})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;if(null===this.state.user)return Object(j.jsx)("div",{children:"loading..."});if(null===this.state.images)return Object(j.jsx)("div",{children:"loading..."});if(null===this.state.reviews)return Object(j.jsx)("div",{children:"loading..."});if(null===this.state.beers)return Object(j.jsx)("div",{children:"loading..."});console.log(this.state);var t=this.state.user,a=this.state.reviews.slice(0,3);return Object(j.jsxs)("div",{className:"flex-center profile__main",children:[Object(j.jsx)(Me,{}),Object(j.jsxs)("div",{className:"flex-center profile__header",children:[Object(j.jsxs)("h1",{children:["Welcome ",t.userName," "]}),Object(j.jsx)("p",{onClick:this.handleShowSettings,children:"settings"}),Object(j.jsx)("h2",{children:t.city}),Object(j.jsxs)("h2",{children:["Beer count: ",this.state.beerCount]}),Object(j.jsx)(m.b,{exact:!0,to:"/user-beer",children:Object(j.jsx)("h3",{children:"Check your beers"})})]}),this.state.showSettings&&Object(j.jsxs)("div",{className:"flex-center profile__settings-box",children:[Object(j.jsx)("h2",{onClick:this.handleLogout,children:"Logout"}),Object(j.jsx)("h2",{children:"Update your profile"}),Object(j.jsx)(Ee,{handleClose:this.handleShowSettings})]}),Object(j.jsx)("h1",{children:"latest images"}),Object(j.jsx)(je,{imagesList:this.state.images,onSelect:this.handleShowPhoto}),Object(j.jsx)("h1",{children:"latest reviews"}),this.state.reviewEdit&&Object(j.jsxs)("div",{className:"flex-center profile__settings-box",children:[Object(j.jsx)("h2",{children:"Update this comment"}),Object(j.jsx)(Ge,{review:this.state.reviewCLicked,handleClose:this.handleReviewClose})]}),Object(j.jsx)("ul",{children:a.map((function(t){return Object(j.jsxs)("li",{children:[Object(j.jsx)(m.b,{exact:!0,to:"/beer-detail/".concat(t.beerid),children:Object(j.jsxs)("h3",{children:[t.beername," score: ",t.rating]})}),Object(j.jsx)("h4",{onClick:function(){return e.handleReviewClicked(t)},children:"edit"}),Object(j.jsx)("p",{children:t.comment})]})}))})]})}}]),a}(n.Component))),ze=(a(121),function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={user:null,isLoggedIn:!1,loading:!0},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)("div",{className:"app__main-block overflow",children:Object(j.jsxs)(d.d,{children:[Object(j.jsx)(d.b,{exact:!0,path:"/",component:Se}),Object(j.jsx)(d.b,{exact:!0,path:"/signin",component:te}),Object(j.jsx)(d.b,{exact:!0,path:"/signup",component:se}),Object(j.jsx)(d.b,{exact:!0,path:"/beer",component:oe}),Object(j.jsx)(d.b,{exact:!0,path:"/user-beer",component:ye}),Object(j.jsx)(d.b,{exact:!0,path:"/beer-detail/:id",component:we}),Object(j.jsx)(d.b,{exact:!0,path:"/map",component:Ue}),Object(j.jsx)(d.b,{exact:!0,path:"/profile",component:Xe}),Object(j.jsx)(d.b,{exact:!0,path:"*",component:he})]})}),Object(j.jsx)(f,{})]})}}]),a}(n.Component));ze.contextType=u;var We=ze,Ye=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,125)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),n(e),s(e),c(e),i(e)}))},He=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={user:null,isLoggedIn:!1,isLoading:!0},e.removeUser=function(){N().then((function(){e.setState({user:null,isLoggedIn:!1})}))},e.setUser=function(t){e.setState({user:t,isLoggedIn:!0})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;S().then((function(t){e.setState({user:t,isLoggedIn:!0,isLoading:!1})})).catch((function(t){e.setState({isLoggedIn:!1,isLoading:!1})}))}},{key:"render",value:function(){var e={user:this.state.user,isLoggedIn:this.state.isLoggedIn,isLoading:this.state.isLoading,removeUser:this.removeUser,setUser:this.setUser};return Object(j.jsx)(u.Provider,{value:e,children:this.props.children})}}]),a}(s.a.Component);a(122),a(123);i.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(m.a,{children:Object(j.jsx)(He,{children:Object(j.jsx)(We,{})})})}),document.getElementById("root")),Ye()},28:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},56:function(e,t,a){},62:function(e,t,a){},64:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){}},[[124,1,2]]]);
//# sourceMappingURL=main.b5a7f6d3.chunk.js.map