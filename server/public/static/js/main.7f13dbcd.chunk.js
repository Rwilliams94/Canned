(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{115:function(e,t,a){},116:function(e,t,a){},117:function(e,t,a){},118:function(e,t,a){},119:function(e,t,a){},120:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),c=a(23),i=a.n(c),r=(a(63),a(2)),l=a(3),o=a(5),h=a(4),d=a(7),u=s.a.createContext(),b=a(8),j=a(29),m=a(0),p=function(e){return function(t){return Object(m.jsx)(u.Consumer,{children:function(a){return Object(m.jsx)(e,Object(j.a)(Object(j.a)({},t),{},{context:a}))}})}},f=(a(65),p((function(e){var t=e.context;return Object(m.jsxs)("nav",{className:"navbar",children:[t.isLoggedIn&&Object(m.jsxs)("ul",{className:"nav__list",children:[Object(m.jsx)("li",{className:"nav__link",children:Object(m.jsx)(b.c,{exact:!0,to:"/beer",className:"nav__link",children:Object(m.jsx)("div",{children:"Beers"})})}),Object(m.jsx)("li",{className:"nav__link",children:Object(m.jsx)(b.c,{exact:!0,to:"/map",children:Object(m.jsx)("div",{children:"Map"})})}),Object(m.jsx)("li",{className:"nav__link",children:Object(m.jsx)(b.c,{exact:!0,to:"/profile",className:"nav__link",children:Object(m.jsx)("div",{children:"Profile"})})})]}),!t.isLoggedIn&&Object(m.jsx)("ul",{className:"nav__list",children:Object(m.jsx)("li",{className:"nav__link",children:Object(m.jsx)(b.c,{exact:!0,to:"/signin",children:Object(m.jsx)("div",{children:"Sign In"})})})})]})}))),g=a(10),O=a(17),x=a.n(O),v=x.a.create({baseURL:"https://canned-project.herokuapp.com",withCredentials:!0});function y(e){if(e.response.data)throw console.log(e.response&&e.response.data),e;throw e}var _=function(e){return v.post("/api/auth/signup",e).then((function(e){return e.data})).catch(y)},w=function(e){return v.post("/api/auth/signin",e).then((function(e){return e.data})).catch(y)},N=function(){return v.get("/api/auth/isLoggedIn").then((function(e){return e.data})).catch(y)},S=function(){return v.get("/api/auth/logout").then((function(e){return e.data})).catch(y)},C=function(e){return v.get("/api/beer/find/?name=".concat(e)).then((function(e){return e.data})).catch(y)},k=function(e){return v.get("/api/brewery/find/?name=".concat(e)).then((function(e){return e.data})).catch(y)},F=function(){return v.get("/api/users/me").then((function(e){return e.data})).catch(y)},L=function(e){return v.patch("/api/users/edit/me",e).then((function(e){return e.data})).catch(y)},R=function(){return v.get("/api/users/me/reviews").then((function(e){return e.data})).catch(y)},B=function(){return v.get("/api/users/me/images").then((function(e){return e.data})).catch(y)},I=function(){return v.get("/api/users/me/beers").then((function(e){return e.data})).catch(y)},D=function(e){return v.patch("/api/users/me/beer/add/".concat(e)).then((function(e){return e.data})).catch(y)},A=function(e){return v.patch("/api/users/me/beer/remove/".concat(e)).then((function(e){return e.data})).catch(y)},T=function(){return v.get("/api/beer").then((function(e){return e.data})).catch(y)},U=function(e){return v.get("/api/beer/".concat(e)).then((function(e){return e.data})).catch(y)},M=function(e){return v.post("/api/beer/add-beer",e).then((function(e){return e.data})).catch(y)},P=function(e,t){return v.patch("/api/beer/edit-beer/".concat(e),t).then((function(e){return e.data})).catch(y)},J=function(e){return v.get("/api/beer/reviews/".concat(e)).then((function(e){return e.data})).catch(y)},V=function(e){return v.get("/api/beer/images/".concat(e)).then((function(e){return e.data})).catch(y)},E=function(){return v.get("/api/brewery").then((function(e){return e.data})).catch(y)},G=function(e){return v.post("/api/brewery/add-brewery",e).then((function(e){return e.data})).catch(y)},W=function(e){return v.get("/api/brewery/beers/".concat(e)).then((function(e){return e.data})).catch(y)},X=function(e){return v.post("/api/review/",e).then((function(e){return e.data})).catch(y)},z=function(e){return v.post("/api/image/",e).then((function(e){return e.data})).catch(y)},Y=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={email:"",password:""},e.handleChange=function(t){var a=t.target.value,n=t.target.name;e.setState(Object(g.a)({},n,a))},e.handleSubmit=function(t){t.preventDefault(),w(e.state).then((function(t){e.context.setUser(t)})).catch((function(e){console.log(e)}))},e}return Object(l.a)(a,[{key:"render",value:function(){return this.context.isLoggedIn?(console.log("already signed in"),Object(m.jsx)(d.a,{to:"/"})):Object(m.jsxs)("section",{className:"form-section",children:[Object(m.jsx)("header",{className:"header",children:Object(m.jsx)("h1",{children:"Welcome back Can Fan"})}),Object(m.jsxs)("form",{autoComplete:"off",className:"form",onSubmit:this.handleSubmit,children:[Object(m.jsx)("h2",{children:"Login"}),Object(m.jsx)("div",{className:"form-group",children:Object(m.jsx)("input",{onChange:this.handleChange,value:this.state.email,className:"input",id:"email",type:"email",name:"email",placeholder:"Email Address"})}),Object(m.jsx)("div",{className:"form-group",children:Object(m.jsx)("input",{onChange:this.handleChange,value:this.state.password,className:"input",id:"password",type:"password",name:"password",placeholder:"Password"})}),Object(m.jsx)("button",{className:"btn-submit",children:"Let's go!"})]}),Object(m.jsxs)("div",{className:"form-section link",children:[Object(m.jsx)("p",{children:"Not yet a fan of the can? "}),Object(m.jsx)(b.b,{to:"/signup",children:"Register"})]})]})}}]),a}(n.Component);Y.contextType=u;var q=Y,H=function(e){return Object(m.jsx)(q,{})},K=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={},e.handleChange=function(t){var a=t.target.value,n=t.target.name;e.setState(Object(g.a)({},n,a))},e.handleSubmit=function(t){t.preventDefault(),_(e.state).then((function(t){e.context.setUser(t)})).catch((function(e){console.log(e)}))},e}return Object(l.a)(a,[{key:"render",value:function(){return this.context.isLoggedIn?Object(m.jsx)(d.a,{to:"/"}):Object(m.jsxs)("section",{className:"form-section",children:[Object(m.jsx)("header",{className:"header",children:Object(m.jsx)("h1",{children:"Welcome to Canned!"})}),Object(m.jsxs)("form",{autoComplete:"off",className:"form",onChange:this.handleChange,onSubmit:this.handleSubmit,children:[Object(m.jsx)("h2",{children:"Let's get you involved"}),Object(m.jsx)("div",{className:"form-group",children:Object(m.jsx)("input",{className:"input",id:"userName",type:"text",name:"userName",placeholder:"User Name"})}),Object(m.jsx)("div",{className:"form-group",children:Object(m.jsx)("input",{className:"input",id:"email",type:"email",name:"email",placeholder:"Email Address"})}),Object(m.jsx)("div",{className:"form-group",children:Object(m.jsx)("input",{className:"input",id:"password",type:"password",name:"password",placeholder:"Email Address"})}),Object(m.jsx)("div",{className:"form-group",children:Object(m.jsx)("input",{className:"input",id:"city",type:"text",name:"city",placeholder:"Home City"})}),Object(m.jsx)("button",{className:"btn-submit",children:"Let's go!"})]}),Object(m.jsxs)("div",{className:"form-section link",children:[Object(m.jsx)("p",{children:"Already a Can Fan? What are you doing here?"}),Object(m.jsx)(b.b,{to:"/signin",children:"Log in"})]})]})}}]),a}(n.Component);K.contextType=u;var Q=K,Z=function(e){return Object(m.jsx)(Q,{})},$=a(58),ee=(a(44),function(e){var t=Math.round(e.rating),a=t<1?"empty":"",n=t<2?"empty":"",s=t<3?"empty":"",c=t<4?"empty":"",i=t<5?"empty":"";return Object(m.jsxs)("div",{className:"star__box",children:[Object(m.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"}),Object(m.jsx)("span",{className:"fa fa-star ".concat(a)}),Object(m.jsx)("span",{className:"fa fa-star ".concat(n)}),Object(m.jsx)("span",{className:"fa fa-star ".concat(s)}),Object(m.jsx)("span",{className:"fa fa-star ".concat(c)}),Object(m.jsx)("span",{className:"fa fa-star ".concat(i)})]})}),te=function(e){var t=e.beerList;return console.log(e),Object(m.jsx)("div",{children:Object(m.jsx)("ul",{className:"beer__list",children:t.map((function(e){return Object(m.jsx)("li",{className:"beer__list-item",children:Object(m.jsxs)("div",{className:"beer__box",children:[Object(m.jsx)("div",{className:"beer__image-box",children:Object(m.jsx)("img",{className:"beer__image",src:e.image,alt:e.name})}),Object(m.jsxs)("div",{className:"beer__info",children:[Object(m.jsx)(b.b,{exact:!0,to:"/beer-detail/".concat(e._id),children:Object(m.jsx)("h3",{children:e.name})}),Object(m.jsx)("h4",{children:e.breweryname}),Object(m.jsx)(ee,{rating:e.rating})]})]})},e._id)}))})})},ae=(a(89),function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={beers:null,sendBeer:[],popUp:!1,rankedBeer:null,normList:!0},e.handleListNormal=function(){e.setState({normList:!0})},e.handleListRanked=function(){e.setState({normList:!1})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;T().then((function(t){var a=Object($.a)(t);e.setState({beers:a});t.sort((function(e,t){return t.rating-e.rating}));e.setState({rankedBeer:t})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){if(null===this.state.beers)return Object(m.jsx)("div",{children:"One sec, just heading to the bar..."});var e=this.state.normList?this.state.beers:this.state.rankedBeer;return Object(m.jsxs)("div",{className:"beer__main-list",children:[Object(m.jsxs)("div",{className:"beer__list-type",children:[Object(m.jsx)("div",{onClick:this.handleListNormal,className:"beer__list-switch",children:Object(m.jsx)("h2",{children:"Latest"})}),Object(m.jsx)("div",{onClick:this.handleListRanked,className:"beer__list-switch",children:Object(m.jsx)("h2",{children:"Top rated"})})]}),Object(m.jsx)(te,{beerList:e})]})}}]),a}(n.Component)),ne=function(){return Object(m.jsx)("div",{children:Object(m.jsx)("div",{className:"lost",children:Object(m.jsx)("p",{children:"you seem a bit lost, let's get back to the beer!"})})})},se=a(11),ce=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={rating:0,starOne:"empty",starTwo:"empty",starThree:"empty",starFour:"empty",starFive:"empty"},e.handleOne=function(){e.setState({rating:1,starOne:"",starTwo:"empty",starThree:"empty",starFour:"empty",starFive:"empty"}),e.props.setRate(e.state.rating),console.log(e.state)},e.handleTwo=function(){e.setState({rating:2,starOne:"",starTwo:"",starThree:"empty",starFour:"empty",starFive:"empty"}),e.props.setRate(e.state.rating),console.log(e.state)},e.handleThree=function(){e.setState({rating:3,starOne:"",starTwo:"",starThree:"",starFour:"empty",starFive:"empty"}),e.props.setRate(e.state.rating),console.log(e.state)},e.handleFour=function(){e.setState({rating:4,starOne:"",starTwo:"",starThree:"",starFour:"",starFive:"empty"}),e.props.setRate(e.state.rating),console.log(e.state)},e.handleFive=function(){e.setState({rating:5,starOne:"",starTwo:"",starThree:"",starFour:"",starFive:""}),e.props.setRate(e.state.rating),console.log(e.state)},e}return Object(l.a)(a,[{key:"render",value:function(){return Object(m.jsx)("div",{children:Object(m.jsxs)("div",{className:"review__star__box",children:[Object(m.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"}),Object(m.jsx)("span",{onClick:this.handleOne,className:"fa fa-star ".concat(this.state.starOne)}),Object(m.jsx)("span",{onClick:this.handleTwo,className:"fa fa-star ".concat(this.state.starTwo)}),Object(m.jsx)("span",{onClick:this.handleThree,className:"fa fa-star ".concat(this.state.starThree)}),Object(m.jsx)("span",{onClick:this.handleFour,className:"fa fa-star ".concat(this.state.starFour)}),Object(m.jsx)("span",{onClick:this.handleFive,className:"fa fa-star ".concat(this.state.starFive)})]})})}}]),a}(n.Component),ie=(a(90),s.a.forwardRef((function(e,t){return Object(m.jsxs)(s.a.Fragment,{children:[Object(m.jsx)("label",{className:"UploadWidget label",htmlFor:e.name,children:e.children}),Object(m.jsx)("input",{onChange:function(t){var a=t.target.files[0],n=URL.createObjectURL(a);e.onFileSelect&&e.onFileSelect(n)},ref:t,className:"UploadWidget input",id:e.name,name:e.name,type:"file"})]})}))),re=p(function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).beerId=e.props.beerId,e.userId=e.props.context.user._id,e.beerName=e.props.beerName,e.state={beername:e.beerName,beerid:e.beerId,userid:e.userId},e.imageRef=s.a.createRef(),e.handleChange=function(t){var a=t.target.value,n=t.target.name;e.setState(Object(g.a)({},n,a)),console.log(e.state)},e.handleSubmit=function(t){t.preventDefault();var a=e.state,n=a.beername,s={beerid:a.beerid,beername:n,userid:a.userid,rating:a.rating,comment:a.comment},c=new FormData;for(var i in e.state)"image"!==i&&c.append(i,e.state[i]);var r,l=Object(se.a)(c.entries());try{for(l.s();!(r=l.n()).done;){var o=r.value;console.log(o[0]+", "+o[1])}}catch(h){l.e(h)}finally{l.f()}e.imageRef.current.files[0]&&c.append("image",e.imageRef.current.files[0]),X(s).then((function(e){console.log(e,"success")})).catch((function(e){console.log(e)})),e.imageRef.current.files[0]&&z(c).then((function(e){console.log(e,"success")})).catch((function(e){return console.log(e)})),e.props.onComplete()},e.handleFileSelect=function(t){e.setState({tmpUrl:t})},e.handleAddStars=function(t){e.setState({rating:t})},e}return Object(l.a)(a,[{key:"render",value:function(){return console.log(this.state),Object(m.jsxs)("section",{className:"details__review-form",children:[Object(m.jsx)("header",{className:"header",children:Object(m.jsxs)("h3",{children:["Add a Review of ",this.props.beerName]})}),Object(m.jsxs)("form",{autoComplete:"off",className:"form",onSubmit:this.handleSubmit,children:[Object(m.jsx)("div",{className:"form-group",children:Object(m.jsx)(ce,{setRate:this.handleAddStars})}),Object(m.jsx)("div",{className:"form-group",children:Object(m.jsx)("textarea",{className:"review-comment",id:"comment",type:"text",name:"comment",value:this.state.comment,placeholder:"Write your thoughts",onChange:this.handleChange})}),Object(m.jsxs)("div",{className:"newbeer__image-output",children:[Object(m.jsx)(ie,{ref:this.imageRef,onFileSelect:this.handleFileSelect,name:"image",children:"Upload image"}),Object(m.jsx)("div",{className:"newbeer__image",children:this.state.tmpUrl?Object(m.jsx)("img",{src:this.state.tmpUrl,alt:"beer"}):""})]}),Object(m.jsx)("button",{className:"btn-submit",children:"Review Can"})]})]})}}]),a}(n.Component)),le=(a(91),function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).images=e.props.imagesList,e.state={photos:e.images,number:0,photo:0},e.handleNextPhoto=function(){var t=e.state.photos.length;e.setState({number:e.state.number+1});var a=Math.abs(e.state.number)%t;e.setState({photo:a}),console.log(e.state.photo,e.state.number)},e.handlePreviousPhoto=function(){var t=e.state.photos.length;e.setState({number:e.state.number-1});var a=Math.abs(e.state.number)%t;e.setState({photo:a}),console.log(e.state.photo,e.state.number)},e}return Object(l.a)(a,[{key:"render",value:function(){return this.state.images?Object(m.jsx)("div",{children:"loading images..."}):Object(m.jsx)("div",{children:0===this.state.photos.length?Object(m.jsx)("div",{children:Object(m.jsx)("h2",{children:"no photos to display"})}):Object(m.jsxs)("div",{className:"image__gallery-box ",children:[Object(m.jsx)("p",{onClick:this.handlePreviousPhoto,children:"P"}),Object(m.jsxs)("div",{className:"image__gallery-grid",children:[Object(m.jsx)("div",{className:"flex-center image__image-box",children:Object(m.jsx)("img",{className:"image__gallery-photo",src:this.state.photos[this.state.photo].image,alt:this.state.photo})}),Object(m.jsx)("div",{className:"flex-center image__image-box",children:this.state.photos.length>1?Object(m.jsx)("img",{className:"image__gallery-photo",src:this.state.photos[this.state.photo+1].image,alt:this.state.photo+1}):""}),Object(m.jsx)("div",{className:"flex-center image__image-box",children:this.state.photos.length>2?Object(m.jsx)("img",{className:"image__gallery-photo",src:this.state.photos[this.state.photo+2].image,alt:this.state.photo+2}):""})]}),Object(m.jsx)("p",{onClick:this.handleNextPhoto,children:"N"})]})})}}]),a}(n.Component)),oe=a(24),he=function(e){var t,a=e.children,n=e.disabled,s=e.handleClick,c=Object(oe.a)(e,["children","disabled","handleClick"]),i={primary:"primary",secondary:"secondary"};for(var r in c)i[r]&&(t=i[r]);return Object(m.jsx)("button",{disabled:n,id:"Btn",className:"Btn btn-".concat(t||""),onClick:s,children:a})},de=(a(92),function(e){var t=e.status,a=e.message;return Object(m.jsx)("div",{className:"FeedBack ".concat(t),children:Object(m.jsx)("p",{children:a})})}),ue=(a(45),function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={search:"",results:[],isLoading:!1},e.handleSearch=function(t){e.setState({search:t.target.value,isLoading:!0}),clearTimeout(e.timeoutId),e.timeoutId=setTimeout((function(){e.performSearch()}),1e3)},e.performSearch=function(){""!==e.state.search?k(e.state.search).then((function(t){e.setState({results:t,isLoading:!1})})):e.setState({results:[],isLoading:!1})},e}return Object(l.a)(a,[{key:"handleBreweryClicked",value:function(e){this.setState({search:e.name,results:[]}),console.log(this.props),this.props.onSelect(e)}},{key:"render",value:function(){var e=this;return Object(m.jsxs)("div",{className:"searchBrew__box",children:[Object(m.jsx)("h2",{children:"SearchBrew"}),Object(m.jsx)("input",{className:"searchBrew__bar",type:"text",value:this.state.search,onChange:this.handleSearch,name:"searchBrew",id:"searchBrew"}),Object(m.jsxs)("ul",{className:"searchBrew__results",children:[this.state.results.map((function(t){return Object(m.jsx)("li",{className:"searchBrew__list-item",onClick:function(){return e.handleBreweryClicked(t)},children:Object(m.jsx)("h4",{children:t.name})},t._id)})),this.state.isLoading&&Object(m.jsx)("li",{className:"searchBrew__list-item",children:"Brewery hunting..."})]})]})}}]),a}(n.Component));function be(e,t,a){if(!t||"object"!==typeof t||t instanceof Date||t instanceof File){var n=null==t?"":t;e.append(a,n)}else Object.keys(t).forEach((function(n){be(e,t[n],a?"".concat(a,"[").concat(n,"]"):n)}))}var je=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={httpResponse:null},e.imageRef=s.a.createRef(),e.formRef=s.a.createRef(),e.handleChange=function(t){var a="file"===t.target.type?t.target.files[0]:t.target.value,n=t.target.name;e.setState(Object(g.a)({},n,a))},e.handleSubmit=function(t){t.preventDefault();var a=new FormData,n=e.state;n.httpRespons;be(a,Object(oe.a)(n,["httpRespons"])),P(e.props.beer._id,a).then((function(t){e.setState({httpResponse:{status:"success",message:"beer successfully updated."}}),e.timeoutId=setTimeout((function(){e.setState({httpResponse:null})}),2e3),e.props.handleChange(t),e.props.handleClose()})).catch((function(t){e.setState({httpResponse:{status:"failure",message:"Something bad happened while updating your beer, try again later"}}),e.timeoutId=setTimeout((function(){e.setState({httpResponse:null})}),2e3)}))},e.handleFileSelect=function(t,a){e.setState({image:a})},e.handleBrewerySelect=function(t){e.setState({breweryname:t.name,breweryid:t._id})},e.handleAddStars=function(t){e.setState({rating:t})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setState({beer:this.props.beer,isLoading:!1})}},{key:"render",value:function(){var e=this.state.httpResponse,t=this.props.beer,a=t.name,n=t.description,s=t.abv,c=t.breweryname,i=t.releasedate;t.breweryid,t.rating,t.date;return Object(m.jsx)("section",{className:"form-section",children:Object(m.jsxs)("form",{autoComplete:"off",className:"form",onSubmit:this.handleSubmit,children:[Object(m.jsx)("h1",{className:"header",children:"Edit this can"}),Object(m.jsx)("div",{className:"round-image widget-image",children:Object(m.jsx)("img",{src:this.state.tmpUrl||this.props.beer.image,alt:a})}),Object(m.jsx)("div",{className:"form-group-uploadwidget",children:Object(m.jsx)(ie,{onFileSelect:this.handleFileSelect,name:"image",children:"Change image"})}),e&&Object(m.jsx)(de,{message:e.message,status:e.status}),Object(m.jsx)("div",{className:"form-group",children:Object(m.jsx)("input",{className:"input",id:"name",type:"text",name:"name",onChange:this.handleChange,defaultValue:a})}),Object(m.jsx)("div",{className:"form-group",children:Object(m.jsx)("textarea",{className:"input",id:"description",type:"text",name:"description",defaultValue:n})}),Object(m.jsx)("div",{className:"form-group",children:Object(m.jsx)(ce,{setRate:this.handleAddStars})}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsxs)("h2",{children:["Current brewery: ",c]}),Object(m.jsx)(ue,{onSelect:this.handleBrewerySelect})]}),Object(m.jsx)("div",{className:"form-group",children:Object(m.jsx)("input",{className:"form__input",onChange:this.handleChange,defaultValue:s,type:"number",name:"abv",id:"abv"})}),Object(m.jsx)("div",{className:"form-group",children:Object(m.jsx)("input",{className:"input",id:"releasedate",type:"number",name:"releasedate",onChange:this.handleChange,defaultValue:i})}),Object(m.jsx)(he,{primary:!0,children:"Save"})]})})}}]),a}(n.Component);je.contextType=u;var me=je,pe=(a(46),p(function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).beerId=e.props.match.params.id,e.state={user:null,beer:null,userBeers:null,alreadyDrunk:!1,reviewForm:!1,imageForm:!1,beerImages:null,beerReviews:null,showSettings:!1},e.handleAddBeer=function(){D(e.beerId).then((function(t){console.log("success"),e.setState({alreadyDrunk:!e.state.alreadyDrunk})})).catch((function(e){return console.log(e)}))},e.handleRemoveBeer=function(){A(e.beerId).then((function(t){console.log("success"),e.setState({alreadyDrunk:!e.state.alreadyDrunk,reviewForm:!1,imageForm:!1})})).catch((function(e){return console.log(e)}))},e.handleShowReview=function(){console.log("click"),e.setState({reviewForm:!e.state.reviewForm})},e.handleShowImage=function(){e.setState({imageForm:!e.state.imageForm})},e.handleShowSettings=function(){e.setState({showSettings:!e.state.showSettings})},e.handleBeerChange=function(t){e.setState({beer:t})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.context.user;this.setState({user:t,userBeers:t.beers}),U(this.beerId).then((function(t){void 0===t.name&&e.props.history.push("/*"),e.setState({beer:t})})).catch((function(e){console.log(e)})),t.beers.includes(this.beerId)&&this.setState({alreadyDrunk:!0}),V(this.beerId).then((function(t){t.length>0?e.setState({beerImages:t}):e.setState({beerImages:[]})})).catch((function(e){console.log(e)})),J(this.beerId).then((function(t){t.length>0?e.setState({beerReviews:t}):e.setState({beerReviews:[]})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){if(null===this.state.user)return Object(m.jsx)("div",{children:"One sec, just heading to the bar..."});if(null===this.state.beer)return Object(m.jsx)("div",{children:"One sec, just heading to the bar..."});if(null===this.state.beerImages)return Object(m.jsx)("div",{children:"One sec, just heading to the bar..."});if(null===this.state.beerReviews)return Object(m.jsx)("div",{children:"One sec, just heading to the bar..."});var e=this.state.beer;return Object(m.jsxs)("div",{className:"details__main",children:[Object(m.jsxs)("div",{className:"details__link-bar",children:[this.state.alreadyDrunk?Object(m.jsxs)("div",{className:"flex-center",children:[Object(m.jsx)("h3",{children:"Canned!"}),Object(m.jsxs)("div",{className:"details__canned-options",children:[Object(m.jsx)("h3",{onClick:this.handleShowReview,children:"Review"}),Object(m.jsx)("h3",{onClick:this.handleRemoveBeer,children:"un-Can?"})]})]}):Object(m.jsx)("h3",{onClick:this.handleAddBeer,children:"Tried this one before? Can it!"}),this.state.reviewForm&&Object(m.jsx)(re,{beerName:e.name,beerId:this.beerId,onComplete:this.handleShowReview})]}),Object(m.jsxs)("div",{className:"details__box",children:[Object(m.jsxs)("div",{className:"details__top-box",children:[Object(m.jsx)("div",{className:"details__image-box",children:Object(m.jsx)("img",{className:"details__image",src:e.image,alt:"beer"})}),Object(m.jsxs)("div",{className:"details__info-box",children:[Object(m.jsx)("h1",{children:e.name}),Object(m.jsx)("h4",{children:e.breweryname}),Object(m.jsx)("div",{className:"details__rating",children:Object(m.jsx)(ee,{rating:e.rating})}),Object(m.jsxs)("p",{children:[e.abv,"% ABV"]})]}),Object(m.jsx)("h4",{onClick:this.handleShowSettings,children:"settings"}),this.state.showSettings&&Object(m.jsxs)("div",{className:"flex-center profile__settings-box",children:[Object(m.jsx)("h2",{onClick:this.handleLogout,children:"Logout"}),Object(m.jsx)("h2",{children:"Update your profile"}),Object(m.jsx)(me,{beer:this.state.beer,handleChange:this.handleBeerChange,handleClose:this.handleShowSettings})]})]}),Object(m.jsx)("div",{className:"details__image-scroll",children:this.state.beerImages.length>0?Object(m.jsx)(le,{imagesList:this.state.beerImages}):Object(m.jsx)("h1",{children:"The beer has no Can snaps yet!"})}),Object(m.jsx)("div",{className:"details__description",children:Object(m.jsx)("p",{children:e.description})}),Object(m.jsx)(b.b,{exact:!0,to:"/beers/edit/".concat(this.beerID),className:"home__link",children:Object(m.jsx)("h3",{children:"Edit this beer"})}),Object(m.jsx)("h3",{children:"Comments"}),Object(m.jsx)("ul",{children:this.state.beerReviews.map((function(e){return Object(m.jsxs)("li",{children:[Object(m.jsx)(ee,{rating:e.rating}),Object(m.jsx)("p",{children:e.comment})]})}))})]})]})}}]),a}(n.Component))),fe=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={beers:null,sendBeer:[],popUp:!1},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;I().then((function(t){e.setState({beers:t})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return null===this.state.beers?Object(m.jsx)("div",{children:"One sec, just heading to the bar..."}):Object(m.jsx)("div",{className:"beer__main-list",children:Object(m.jsx)("ul",{className:"beer__list",children:this.state.beers.map((function(e){return Object(m.jsx)("li",{className:"beer__list-item",children:Object(m.jsxs)("div",{className:"beer__box",children:[Object(m.jsx)("div",{className:"beer__image-box",children:Object(m.jsx)("img",{className:"beer__image",src:e.image,alt:e.name})}),Object(m.jsxs)("div",{className:"beer__info",children:[Object(m.jsx)(b.b,{exact:!0,to:"/beer-detail/".concat(e._id),children:Object(m.jsx)("h3",{children:e.name})}),Object(m.jsx)("h4",{children:e.breweryname}),Object(m.jsx)(ee,{rating:e.rating})]})]})},e._id)}))})})}}]),a}(n.Component),ge=a.p+"static/media/beers.8594ca39.png",Oe=function(){return Object(m.jsx)("div",{children:Object(m.jsxs)("div",{className:"home__box",children:[Object(m.jsx)("img",{className:"home__image",src:ge,alt:"beer"}),Object(m.jsx)("h1",{children:"Welcome to the beers site"}),Object(m.jsx)("p",{className:"home__para",children:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Iste quidem sed voluptates animi natus autem deleniti fugiat repellendus illum consequuntur aliquam, magnam eaque itaque aut amet, libero aspernatur aperiam officiis."})]})})},xe=a(34),ve=(a(113),a(6)),ye=a.n(ve),_e=(a(55),function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={brewery:null,breweryBeers:null,beerList:!1},e.handleAddBeer=function(){D(e.beerId).then((function(t){console.log("success"),e.setState({alreadyDrunk:!e.state.alreadyDrunk})})).catch((function(e){return console.log(e)}))},e.handleRemoveBeer=function(){A(e.beerId).then((function(t){console.log("success"),e.setState({alreadyDrunk:!e.state.alreadyDrunk,reviewForm:!1,imageForm:!1})})).catch((function(e){return console.log(e)}))},e.handleBeerList=function(){e.setState({beerList:!0})},e.handleDescription=function(){e.setState({beerList:!1})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({brewery:this.props.brewery});var t=this.props.brewery._id;W(t).then((function(t){console.log(t),e.setState({breweryBeers:t})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){if(null===this.state.brewery)return Object(m.jsx)("div",{children:"One sec, just heading to the bar..."});if(null===this.state.breweryBeers)return Object(m.jsx)("div",{children:"One sec, just heading to the bar..."});var e=this.state.brewery;return Object(m.jsx)("div",{className:"details__main",children:Object(m.jsxs)("div",{className:"details__box",children:[Object(m.jsx)("div",{onClick:this.props.closePopUp,children:Object(m.jsx)("h2",{children:"back to map"})}),Object(m.jsxs)("div",{className:"details__top-box",children:[Object(m.jsx)("div",{className:"details__image-box",children:Object(m.jsx)("img",{className:"details__image",src:e.image,alt:"brewery"})}),Object(m.jsxs)("div",{className:"details__info-box",children:[Object(m.jsx)("h1",{children:e.name}),Object(m.jsx)("div",{className:"details__rating",children:Object(m.jsx)(ee,{rating:e.rating})}),Object(m.jsxs)("h4",{children:["Established in ",e.establisheddate]}),Object(m.jsx)("h4",{children:e.address}),Object(m.jsxs)("p",{children:["Check them out ",e.website]})]})]}),Object(m.jsxs)("div",{className:"beer__list-type",children:[Object(m.jsx)("div",{onClick:this.handleDescription,className:"beer__list-switch",children:Object(m.jsx)("h2",{children:"Details"})}),Object(m.jsx)("div",{onClick:this.handleBeerList,className:"beer__list-switch",children:Object(m.jsx)("h2",{children:"Beers"})})]}),this.state.beerList?Object(m.jsx)("div",{children:Object(m.jsx)(te,{beerList:this.state.breweryBeers})}):Object(m.jsx)("div",{className:"details__description",children:Object(m.jsx)("p",{children:e.description})})]})})}}]),a}(n.Component));ye.a.workerClass=a(114).default;var we=Object(xe.b)({accessToken:"pk.eyJ1Ijoicm10d2lsbGlhbXMiLCJhIjoiY2ttbThvcXNwMGRyazJ3bGVwdG9sbnRzcSJ9.0R-H-K5vBBYCOD9m6cCxXw"}),Ne=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={breweries:null,longitude:null,latitude:null,breweryClicked:null,showDetails:!1,showName:!1},e.handleMarkerClick=function(t){console.log(t),e.setState({longitude:t.longitude,latitude:t.latitude,breweryClicked:t,showName:!0})},e.handleShowDetails=function(){e.setState({showDetails:!e.state.showDetails,showName:!1})},e.handleBrewerySelect=function(t){console.log(t),e.setState({breweryClicked:t,longitude:t.longitude,latitude:t.latitude,showName:!0})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setState({breweries:this.props.breweryList,longitude:this.props.longitude,latitude:this.props.latitude})}},{key:"render",value:function(){var e=this;return null===this.state.breweries||null===this.state.longitude||null===this.state.latitude?Object(m.jsx)("div",{children:" loading map... "}):(console.log(this.state),Object(m.jsxs)("div",{className:"flex-center",children:[Object(m.jsx)("div",{children:Object(m.jsx)(ue,{onSelect:this.handleBrewerySelect})}),Object(m.jsxs)(we,{style:"mapbox://styles/mapbox/streets-v9",containerStyle:{height:"80vh",width:"98vw"},center:[this.state.longitude,this.state.latitude],children:[this.state.showName?Object(m.jsx)("div",{onClick:this.handleShowDetails,className:"flex-center map__showname-box",children:Object(m.jsx)("h3",{children:this.state.breweryClicked.name})}):"",this.state.showDetails?Object(m.jsx)("div",{className:"map__show-details-box",children:Object(m.jsx)(_e,{closePopUp:this.handleShowDetails,brewery:this.state.breweryClicked})}):"",this.state.breweries.map((function(t){return Object(m.jsx)(xe.a,{coordinates:[t.longitude,t.latitude],anchor:"bottom",onClick:function(){return e.handleMarkerClick(t)},children:Object(m.jsx)("img",{className:"map-marker",src:"https://res.cloudinary.com/dahzswwzk/image/upload/v1617034208/Basic_UI_Icon_Pack_-_Flat_map_pointer-512_d9c33w.webp",alt:"marker"})},t._id)}))]})]}))}}]),a}(s.a.PureComponent),Se=(a(115),function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={search:"",results:[],isLoading:!1},e.handleSearchChange=function(t){e.setState({search:t.target.value,isLoading:!0}),clearTimeout(e.timeoutId),e.timeoutId=setTimeout((function(){e.performSearch()}),1e3)},e.performSearch=function(){""!==e.state.search?x.a.get("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(e.state.search,".json?access_token=pk.eyJ1Ijoicm10d2lsbGlhbXMiLCJhIjoiY2ttbThvcXNwMGRyazJ3bGVwdG9sbnRzcSJ9.0R-H-K5vBBYCOD9m6cCxXw")).then((function(t){e.setState({results:t.data.features,isLoading:!1})})):e.setState({results:[],isLoading:!1})},e.handleItemClicked=function(t){e.setState({search:t.place_name,results:[]}),e.props.onSelect(t)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.results,n=t.isLoading;return Object(m.jsxs)("div",{className:"AutocompletePlace",children:[Object(m.jsx)("input",{className:"input",type:"text",value:this.props.defaultValue||this.state.search,onChange:this.handleSearchChange,placeholder:"Type an address"}),Object(m.jsxs)("ul",{className:"AutocompletePlace-results",children:[a.map((function(t){return Object(m.jsx)("li",{className:"AutocompletePlace-items",onClick:function(){return e.handleItemClicked(t)},children:t.place_name},t.id)})),n&&Object(m.jsx)("li",{className:"AutocompletePlace-items",children:"Loading..."})]})]})}}]),a}(n.Component)),Ce=(a(56),function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={selectedBeer:null,rating:null,name:null,description:null,website:null,establisheddate:2021,address:null,latitude:null,longitude:null},e.imageRef=s.a.createRef(),e.handleChange=function(t){var a=t.target.value,n=t.target.name;e.setState(Object(g.a)({},n,a))},e.handleOnSubmit=function(t){t.preventDefault();var a=new FormData;for(var n in e.state)"image"!==n&&a.append(n,e.state[n]);var s,c=Object(se.a)(a.entries());try{for(c.s();!(s=c.n()).done;){var i=s.value;console.log(i[0]+", "+i[1])}}catch(r){c.e(r)}finally{c.f()}e.imageRef.current.files[0]&&a.append("image",e.imageRef.current.files[0]),G(a).then((function(t){console.log("success",t),e.setState({rating:null,name:null,description:null,website:null,establisheddate:2021,address:null,latitude:null,longitude:null})})).catch((function(e){console.log(e)}))},e.handleFileSelect=function(t){e.setState({tmpUrl:t})},e.handleAddressSelect=function(t){console.log(t),e.setState({address:t.place_name,longitude:t.geometry.coordinates[0],latitude:t.geometry.coordinates[1]})},e.handleAddStars=function(t){e.setState({rating:t})},e}return Object(l.a)(a,[{key:"render",value:function(){return Object(m.jsx)("div",{className:"newbeer__main",children:Object(m.jsxs)("form",{className:"form newbeer__activeform",onSubmit:this.handleOnSubmit,children:[Object(m.jsx)("label",{className:"form__label",htmlFor:"name",children:"Name"}),Object(m.jsx)("input",{className:"form__input",onChange:this.handleChange,value:this.state.name,type:"text",name:"name",id:"name"}),Object(m.jsx)("label",{className:"form__label",htmlFor:"description",children:"Description"}),Object(m.jsx)("textarea",{className:"form__input",onChange:this.handleChange,value:this.state.description,type:"text",name:"description",id:"description"}),Object(m.jsx)("label",{className:"form__label",htmlFor:"name",children:"Website"}),Object(m.jsx)("input",{className:"form__input",onChange:this.handleChange,value:this.state.website,type:"text",name:"website",id:"website"}),Object(m.jsxs)("div",{className:"newbeer__small-details",children:[Object(m.jsx)("label",{className:"year__label",htmlFor:"year",children:"Brewery established in"}),Object(m.jsx)("input",{className:"form__input",onChange:this.handleChange,value:this.state.establisheddate,type:"number",name:"establisheddate",id:"establisheddate"}),Object(m.jsx)(ce,{setRate:this.handleAddStars})]}),Object(m.jsx)(Se,{onSelect:this.handleAddressSelect}),Object(m.jsxs)("div",{className:"newbeer__image-output",children:[Object(m.jsx)(ie,{ref:this.imageRef,onFileSelect:this.handleFileSelect,name:"image",children:"Upload image"}),Object(m.jsx)("div",{className:"newbeer__image",children:this.state.tmpUrl?Object(m.jsx)("img",{src:this.state.tmpUrl,alt:"beer"}):""})]}),Object(m.jsx)("button",{className:"form__button",children:"ADD NEW"})]})})}}]),a}(n.Component));Ce.contextType=u;var ke=Ce,Fe=p(function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).userCity=e.props.context.user.city,e.state={breweries:null,selectedBrewery:null,userCity:e.userCity,longitude:null,latitude:null,showForm:!1},e.handleShowForm=function(){e.setState({showForm:!e.state.showForm})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;E().then((function(t){e.setState({breweries:t})})).catch((function(e){return console.log(e)})),x.a.get("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(this.state.userCity,".json?access_token=").concat("pk.eyJ1Ijoicm10d2lsbGlhbXMiLCJhIjoiY2ttbThvcXNwMGRyazJ3bGVwdG9sbnRzcSJ9.0R-H-K5vBBYCOD9m6cCxXw")).then((function(t){var a=t.data.features[0];console.log(a),e.setState({longitude:a.geometry.coordinates[0],latitude:a.geometry.coordinates[1]})}))}},{key:"render",value:function(){return null===this.state.breweries||null===this.state.userCity||null===this.state.longitude||null===this.state.latitude?Object(m.jsx)("div",{children:"fetching your brewery map"}):(console.log(this.state),Object(m.jsxs)("div",{children:[Object(m.jsx)("h4",{onClick:this.handleShowForm,children:"Can't find your brewery? add it here"}),this.state.showForm&&Object(m.jsx)("div",{className:"map__brewery-form",children:Object(m.jsx)(ke,{})}),Object(m.jsx)("div",{className:"map__map-container",children:Object(m.jsx)(Ne,{breweryList:this.state.breweries,longitude:this.state.longitude,latitude:this.state.latitude})})]}))}}]),a}(n.Component)),Le=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={search:"",results:[],isLoading:!1},e.handleSearch=function(t){e.setState({search:t.target.value,isLoading:!0}),clearTimeout(e.timeoutId),e.timeoutId=setTimeout((function(){e.performSearch()}),1e3)},e.performSearch=function(){""!==e.state.search?C(e.state.search).then((function(t){e.setState({results:t,isLoading:!1})})):e.setState({results:[],isLoading:!1})},e}return Object(l.a)(a,[{key:"handleBeerClicked",value:function(e){this.setState({search:e.name,results:[]}),console.log(this.props),this.props.onSelect(e)}},{key:"render",value:function(){var e=this;return Object(m.jsxs)("div",{className:"search__box",children:[Object(m.jsx)("h2",{children:"Search"}),Object(m.jsx)("input",{className:"search__bar",type:"text",value:this.state.search,onChange:this.handleSearch,name:"search",id:"search"}),Object(m.jsxs)("ul",{className:"search__results",children:[this.state.results.map((function(t){return Object(m.jsx)("li",{className:"search__list-item",onClick:function(){return e.handleBeerClicked(t)},children:Object(m.jsxs)("h4",{children:[t.name," - ",t.breweryname]})},t._id)})),this.state.isLoading&&Object(m.jsx)("li",{className:"search__list-item",children:"Beer hunting..."})]})]})}}]),a}(n.Component),Re=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={showSearch:!1,showForm:!1,selectedBeer:null,rating:null,name:"",description:"",abv:0,breweryname:"",breweryid:null,releasedate:2021},e.imageRef=s.a.createRef(),e.handleChange=function(t){var a=t.target.value,n=t.target.name;e.setState(Object(g.a)({},n,a))},e.handleFormClick=function(){e.setState({showForm:!e.state.showForm})},e.handleSearchClick=function(){e.setState({showSearch:!e.state.showSearch}),e.state.showForm&&e.setState({showForm:!1})},e.handleOnSubmit=function(t){t.preventDefault();var a=new FormData;for(var n in e.state)"image"!==n&&a.append(n,e.state[n]);var s,c=Object(se.a)(a.entries());try{for(c.s();!(s=c.n()).done;){var i=s.value;console.log(i[0]+", "+i[1])}}catch(r){c.e(r)}finally{c.f()}e.imageRef.current.files[0]&&a.append("image",e.imageRef.current.files[0]),M(a).then((function(t){console.log("success",t),D(t._id).then((function(e){console.log("success",e)})).catch((function(e){console.log(e)})),e.setState({rating:null,name:"",description:"",abv:0,breweryname:"",breweryid:null,releasedate:2021})})).catch((function(e){console.log(e)}))},e.handleFileSelect=function(t){e.setState({tmpUrl:t})},e.handleBeerSelect=function(t){e.setState({selectedBeer:t,showSearch:!1,showForm:!1}),D(t._id).then((function(e){console.log("success",e)})).catch((function(e){console.log(e)}))},e.handleBrewerySelect=function(t){e.setState({breweryname:t.name,breweryid:t._id})},e.handleAddStars=function(t){e.setState({rating:t})},e}return Object(l.a)(a,[{key:"render",value:function(){return console.log(this.state),Object(m.jsxs)("div",{className:"newbeer__main",children:[Object(m.jsx)("div",{className:"newbeer__link flex-center",children:Object(m.jsxs)("h1",{className:"",onClick:this.handleSearchClick,children:[" ",this.state.showSearch?"-":"+"," Add Beer"]})}),Object(m.jsx)("div",{children:this.state.showSearch&&Object(m.jsxs)("div",{className:"newbeer__search flex-center",children:[Object(m.jsx)(Le,{onSelect:this.handleBeerSelect}),Object(m.jsxs)("h4",{onClick:this.handleFormClick,children:[this.state.showForm?"-":"+"," can't find it? Let's add it to the Canniverse"]})]})}),this.state.showForm&&Object(m.jsxs)("form",{className:"form newbeer__activeform",onSubmit:this.handleOnSubmit,children:[Object(m.jsx)("label",{className:"form__label",htmlFor:"name",children:"Name"}),Object(m.jsx)("input",{className:"form__input",onChange:this.handleChange,value:this.state.name,type:"text",name:"name",id:"name"}),Object(m.jsx)("label",{className:"form__label",htmlFor:"description",children:"Description"}),Object(m.jsx)("textarea",{className:"form__input",onChange:this.handleChange,value:this.state.description,type:"text",name:"description",id:"description"}),Object(m.jsxs)("div",{className:"newbeer__small-details",children:[Object(m.jsx)("label",{className:"abv__label",htmlFor:"abv",children:"ABV"}),Object(m.jsx)("input",{className:"form__input",onChange:this.handleChange,value:this.state.abv,type:"number",name:"abv",id:"abv"}),Object(m.jsx)("label",{className:"year__label",htmlFor:"year",children:"Release date"}),Object(m.jsx)("input",{className:"form__input",onChange:this.handleChange,value:this.state.releasedate,type:"number",name:"releasedate",id:"releasedate"}),Object(m.jsx)(ce,{setRate:this.handleAddStars})]}),Object(m.jsx)(ue,{onSelect:this.handleBrewerySelect}),Object(m.jsxs)("div",{className:"newbeer__image-output",children:[Object(m.jsx)(ie,{ref:this.imageRef,onFileSelect:this.handleFileSelect,name:"image",children:"Upload image"}),Object(m.jsx)("div",{className:"newbeer__image",children:this.state.tmpUrl?Object(m.jsx)("img",{src:this.state.tmpUrl,alt:"beer"}):""})]}),Object(m.jsx)("button",{className:"form__button",children:"ADD NEW"})]})]})}}]),a}(n.Component);Re.contextType=u;var Be=Re,Ie=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={userName:null,email:null,city:null,tmpUrl:"",httpResponse:null,isLoading:!0},e.imageRef=s.a.createRef(),e.handleChange=function(t){var a=t.target.name,n=t.target.value;e.setState(Object(g.a)({},a,n))},e.isValidInput=function(t){return""!==e.state[t]},e.checkError=function(){for(var t in e.state)if(""===e.state[t])return!0;return!1},e.handleSubmit=function(t){t.preventDefault();var a=new FormData;for(var n in e.state)a.append(n,e.state[n]);L(a).then((function(){F().then((function(t){e.context.setUser(t)})),e.setState({httpResponse:{status:"success",message:"Profile successfully updated."}}),e.timeoutId=setTimeout((function(){e.setState({httpResponse:null})}),2e3)})).catch((function(t){e.setState({httpResponse:{status:"failure",message:"Something bad happened while updating your profile, try again later"}}),e.timeoutId=setTimeout((function(){e.setState({httpResponse:null})}),2e3)}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;F().then((function(t){e.setState({userName:t.userName,email:t.email,city:t.city,isLoading:!1})})).catch((function(t){e.setState({isLoading:!1,httpResponse:{status:"failure",message:"Something bad happened, please try again later"}})}))}},{key:"render",value:function(){var e=this.state.httpResponse;return this.state.isLoading?Object(m.jsx)("div",{children:"Loading..."}):Object(m.jsx)("section",{className:"form-section",children:Object(m.jsxs)("form",{autoComplete:"off",className:"form",onSubmit:this.handleSubmit,children:[Object(m.jsx)("h1",{className:"header",children:"Edit your profile"}),e&&Object(m.jsx)(de,{message:e.message,status:e.status}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("input",{className:"input",id:"userName",type:"text",name:"userName",onChange:this.handleChange,value:this.state.userName}),!this.isValidInput("userName")&&Object(m.jsx)("p",{className:"input-error",children:"Invalid input"})]}),Object(m.jsx)("div",{className:"form-group",children:Object(m.jsx)("input",{className:"input",id:"email",type:"email",name:"email",value:this.state.email,disabled:!0})}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("input",{className:"input",id:"city",type:"text",name:"city",onChange:this.handleChange,value:this.state.city}),!this.isValidInput("city")&&Object(m.jsx)("p",{className:"input-error",children:"Invalid input"})]}),Object(m.jsx)(he,{primary:!0,children:"Save"})]})})}}]),a}(n.Component);Ie.contextType=u;var De=Ie,Ae=(a(116),p(function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={user:null,beers:null,images:null,reviews:null,beerCount:null,showSettings:!1},e.handleNextPhoto=function(){e.setState({imageNumber:e.state.imageNumber+1})},e.handlePreviousPhoto=function(){e.setState({imageNumber:e.state.imageNumber-1})},e.handleLogout=function(){var t=e.props.context;S().then((function(){t.removeUser(),e.props.history.push("/")})).catch((function(e){console.log(e)}))},e.handleShowSettings=function(){e.setState({showSettings:!e.state.showSettings})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.context.user;this.setState({user:t}),I().then((function(t){e.setState({beers:t,beerCount:t.length})})).catch((function(e){return console.log(e)})),R().then((function(t){e.setState({reviews:t})})).catch((function(e){return console.log(e)})),B().then((function(t){e.setState({images:t})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){if(null===this.state.user)return Object(m.jsx)("div",{children:"loading..."});if(null===this.state.images)return Object(m.jsx)("div",{children:"loading..."});if(null===this.state.reviews)return Object(m.jsx)("div",{children:"loading..."});if(null===this.state.beers)return Object(m.jsx)("div",{children:"loading..."});console.log(this.state);var e=this.state.user,t=this.state.reviews.slice(0,3);return Object(m.jsxs)("div",{className:"flex-center profile__main",children:[Object(m.jsx)(Be,{}),Object(m.jsxs)("div",{className:"flex-center profile__header",children:[Object(m.jsxs)("h1",{children:["Welcome ",e.userName," "]}),Object(m.jsx)("p",{onClick:this.handleShowSettings,children:"settings"}),Object(m.jsx)("h2",{children:e.city}),Object(m.jsxs)("h2",{children:["Beer count: ",this.state.beerCount]}),Object(m.jsx)(b.b,{exact:!0,to:"/user-beer",children:Object(m.jsx)("h3",{children:"Check your beers"})})]}),this.state.showSettings&&Object(m.jsxs)("div",{className:"flex-center profile__settings-box",children:[Object(m.jsx)("h2",{onClick:this.handleLogout,children:"Logout"}),Object(m.jsx)("h2",{children:"Update your profile"}),Object(m.jsx)(De,{handleClose:this.handleShowSettings})]}),Object(m.jsx)("h1",{children:"latest images"}),Object(m.jsx)(le,{imagesList:this.state.images}),Object(m.jsx)("h1",{children:"latest reviews"}),Object(m.jsx)("ul",{children:t.map((function(e){return Object(m.jsxs)("li",{children:[Object(m.jsxs)("h3",{children:[e.beername," score: ",e.rating]}),Object(m.jsx)("p",{children:e.comment})]})}))})]})}}]),a}(n.Component))),Te=(a(117),function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={user:null,isLoggedIn:!1,loading:!0},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(m.jsxs)("div",{className:"App",children:[Object(m.jsxs)(d.d,{children:[Object(m.jsx)(d.b,{exact:!0,path:"/",component:Oe}),Object(m.jsx)(d.b,{exact:!0,path:"/signin",component:H}),Object(m.jsx)(d.b,{exact:!0,path:"/signup",component:Z}),Object(m.jsx)(d.b,{exact:!0,path:"/beer",component:ae}),Object(m.jsx)(d.b,{exact:!0,path:"/user-beer",component:fe}),Object(m.jsx)(d.b,{exact:!0,path:"/beer-detail/:id",component:pe}),Object(m.jsx)(d.b,{exact:!0,path:"/map",component:Fe}),Object(m.jsx)(d.b,{exact:!0,path:"/profile",component:Ae}),Object(m.jsx)(d.b,{exact:!0,path:"*",component:ne})]}),Object(m.jsx)(f,{})]})}}]),a}(n.Component));Te.contextType=u;var Ue=Te,Me=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,121)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),n(e),s(e),c(e),i(e)}))},Pe=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={user:null,isLoggedIn:!1,isLoading:!0},e.removeUser=function(){S().then((function(){e.setState({user:null,isLoggedIn:!1})}))},e.setUser=function(t){e.setState({user:t,isLoggedIn:!0})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;N().then((function(t){e.setState({user:t,isLoggedIn:!0,isLoading:!1})})).catch((function(t){e.setState({isLoggedIn:!1,isLoading:!1})}))}},{key:"render",value:function(){var e={user:this.state.user,isLoggedIn:this.state.isLoggedIn,isLoading:this.state.isLoading,removeUser:this.removeUser,setUser:this.setUser};return Object(m.jsx)(u.Provider,{value:e,children:this.props.children})}}]),a}(s.a.Component);a(118),a(119);i.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(b.a,{children:Object(m.jsx)(Pe,{children:Object(m.jsx)(Ue,{})})})}),document.getElementById("root")),Me()},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},63:function(e,t,a){},65:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){}},[[120,1,2]]]);
//# sourceMappingURL=main.7f13dbcd.chunk.js.map